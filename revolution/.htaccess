RewriteEngine On

# photos 
RewriteRule ^photos$ index.php?resource=photo&method=listing [L,QSA]
RewriteRule ^photos/([a-zA-Z][a-zA-Z_0-9-]*)$ index.php?resource=photo&method=listing&username=$1 [L,QSA]
RewriteRule ^photos/([0-9]+)$ index.php?resource=photo&method=view&id=$1 [L,QSA]
RewriteRule ^photo/create$ index.php?resource=photo&method=create [L,QSA]

# polls
RewriteRule ^polls/([0-9]+)$ index.php?resource=poll&method=view&id=$1 [L,QSA]
RewriteRule ^polls/([a-zA-Z][a-zA-Z_0-9-]*)$ index.php?resource=poll&method=listing&username=$1 [L,QSA]
RewriteRule ^pollvote/create$ index.php?resource=pollvote&method=create [L,QSA]

# journals
RewriteRule ^journals$ index.php?resource=journal&method=listing [L,QSA]
RewriteRule ^journals/([a-zA-Z][a-zA-Z_0-9-]*)$ index.php?resource=journal&method=listing&username=$1 [L,QSA]
RewriteRule ^journals/([0-9]+)$ index.php?resource=journal&method=view&id=$1 [L,QSA]

# session
RewriteRule ^login$ index.php?resource=session&method=view [L,QSA]
RewriteRule ^session/create$ index.php?resource=session&method=create [L,QSA]
RewriteRule ^session/delete$ index.php?resource=session&method=delete [L,QSA]

# favourites
RewriteRule ^favourite/create$ index.php?resource=favourite&method=create [L,QSA]

# comments
RewriteRule ^comment/create$ index.php?resource=comment&method=create [L,QSA]
RewriteRule ^comments/([0-9]+)$ index.php?resource=comment&method=view&commentid=$1 [L,QSA]
RewriteRule ^comments/([1-4])/([0-9]+)$ index.php?resource=comment&method=listing&typeid=$1&itemid=$2 [L,QSA]

# news
RewriteRule ^news$ index.php?resource=news&method=listing [L,QSA]

# users
RewriteRule ^users/online$ index.php?resource=user&method=listing [L,QSA]
RewriteRule ^users/([0-9]+)$ index.php?resource=user&method=view&id=$1 [L,QSA]
RewriteRule ^users/([a-zA-Z][a-zA-Z\-_0-9]+)$ index.php?resource=user&method=view&subdomain=$1 [L,QSA]

# friendship
RewriteRule ^friendship/create$ index.php?resource=friendship&method=create [L,QSA]
RewriteRule ^friendship/delete$ index.php?resource=friendship&method=delete [L,QSA]
RewriteRule ^friendship/([a-zA-Z][a-zA-Z_0-9-]*)$ index.php?resource=friendship&method=view&username=$1 [L,QSA]

# chat
RewriteRule ^chat/messages$ index.php?resource=chatmessage&method=listing [L,QSA]
RewriteRule ^chat/message/create$ index.php?resource=chatmessage&method=create&channelid=$1 [L,QSA]

# tunnel
RewriteRule ^tunnel/create$ index.php?resource=tunnel&method=create [L,QSA]
RewriteRule ^tunnel/update/([0-9]+)$ index.php?resource=tunnel&method=update&id=$1 [L,QSA]

# notifications
RewriteRule ^notifications$ index.php?resource=notification&method=list [L,QSA]
RewriteRule ^notification/delete$ index.php?resource=notification&method=delete [L,QSA]

# interests
RewriteRule ^interests/([0-9]+)$ index.php?resource=interest&method=list&userid=$1 [L,QSA]

# global

RewriteRule ^global.xsl$ xslt/global.php [L,QSA]
RewriteRule ^global.js$ js/global.php [L,QSA]
RewriteRule ^global.css$ css/global.php [L,QSA]

php_flag display_errors on
