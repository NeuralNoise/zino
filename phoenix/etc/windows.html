<html>
    <head>
        <title>In-site windows</title>
        <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
        }
        body {
            background-color: #ffffee;
        }
        div.puffin {
            border: 1px solid black;
            background-color: #eee;
            position: fixed;
            left: 100px;
            top: 100px;
            width: 200px;
            height: 300px;
        }
        </style>
        <script type="text/javascript">
            var Puffin = {
                create: function () {
                    var obj = {
                        div: null,
                        x: 0, y: 0, 
                        moving: false,
                        move: function ( x, y ) {
                            this.x = x;
                            this.y = y;
                            this.div.style.left = x + 'px';
                            this.div.style.top = y + 'px';
                        },
                        __construct: function () {
                            this.div = document.getElementsByTagName( 'div' )[ 0 ];
                            this.div.onmousedown = ( function( me ) {
                                return function( e ) {
                                    if ( !e ) {
                                        e = window.event;
                                    }
                                    me.capture = [ e.clientX - me.x, e.clientY - me.y ];
                                    me.moving = true;
                                };
                            } )( this );
                            document.body.onmouseup = ( function( me ) {
                                return function() {
                                    me.moving = false;
                                };
                            } )( this );
                            document.body.onmousemove = ( function( me ) {
                                return function( e ) {
                                    if ( !e ) {
                                        e = window.event;
                                    }
                                    if ( me.moving ) {
                                        document.title = me.capture[ 0 ] + ', ' + me.capture[ 1 ];
                                        me.move( e.clientX - me.capture[ 0 ], e.clientY - me.capture[ 1 ] );
                                    }
                                };
                            } )( this );
                            document.body.appendChild( this.div );
                        }
                    };
                    obj.__construct();
                    return obj;
                },
            };

        </script>
    </head>
    <body>
        <div class="puffin">
        </div>
        <script type="text/javascript">
            var myWindow = Puffin.create();
            myWindow.show();
        </script>
    </body>
</html>

