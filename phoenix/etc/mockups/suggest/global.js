
(function(){var _jQuery=window.jQuery,_$=window.$;var jQuery=window.jQuery=window.$=function(selector,context){return new jQuery.fn.init(selector,context);};var quickExpr=/^[^<]*(<(.|\s)+>)[^>]*$|^#(\w+)$/,isSimple=/^.[^:#\[\.]*$/,undefined;jQuery.fn=jQuery.prototype={init:function(selector,context){selector=selector||document;if(selector.nodeType){this[0]=selector;this.length=1;return this;}
if(typeof selector=="string"){var match=quickExpr.exec(selector);if(match&&(match[1]||!context)){if(match[1])
selector=jQuery.clean([match[1]],context);else{var elem=document.getElementById(match[3]);if(elem){if(elem.id!=match[3])
return jQuery().find(selector);return jQuery(elem);}
selector=[];}}else
return jQuery(context).find(selector);}else if(jQuery.isFunction(selector))
return jQuery(document)[jQuery.fn.ready?"ready":"load"](selector);return this.setArray(jQuery.makeArray(selector));},jquery:"1.2.6",size:function(){return this.length;},length:0,get:function(num){return num==undefined?jQuery.makeArray(this):this[num];},pushStack:function(elems){var ret=jQuery(elems);ret.prevObject=this;return ret;},setArray:function(elems){this.length=0;Array.prototype.push.apply(this,elems);return this;},each:function(callback,args){return jQuery.each(this,callback,args);},index:function(elem){var ret=-1;return jQuery.inArray(elem&&elem.jquery?elem[0]:elem,this);},attr:function(name,value,type){var options=name;if(name.constructor==String)
if(value===undefined)
return this[0]&&jQuery[type||"attr"](this[0],name);else{options={};options[name]=value;}
return this.each(function(i){for(name in options)
jQuery.attr(type?this.style:this,name,jQuery.prop(this,options[name],type,i,name));});},css:function(key,value){if((key=='width'||key=='height')&&parseFloat(value)<0)
value=undefined;return this.attr(key,value,"curCSS");},text:function(text){if(typeof text!="object"&&text!=null)
return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text));var ret="";jQuery.each(text||this,function(){jQuery.each(this.childNodes,function(){if(this.nodeType!=8)
ret+=this.nodeType!=1?this.nodeValue:jQuery.fn.text([this]);});});return ret;},wrapAll:function(html){if(this[0])
jQuery(html,this[0].ownerDocument).clone().insertBefore(this[0]).map(function(){var elem=this;while(elem.firstChild)
elem=elem.firstChild;return elem;}).append(this);return this;},wrapInner:function(html){return this.each(function(){jQuery(this).contents().wrapAll(html);});},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html);});},append:function(){return this.domManip(arguments,true,false,function(elem){if(this.nodeType==1)
this.appendChild(elem);});},prepend:function(){return this.domManip(arguments,true,true,function(elem){if(this.nodeType==1)
this.insertBefore(elem,this.firstChild);});},before:function(){return this.domManip(arguments,false,false,function(elem){this.parentNode.insertBefore(elem,this);});},after:function(){return this.domManip(arguments,false,true,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});},end:function(){return this.prevObject||jQuery([]);},find:function(selector){var elems=jQuery.map(this,function(elem){return jQuery.find(selector,elem);});return this.pushStack(/[^+>] [^+>]/.test(selector)||selector.indexOf("..")>-1?jQuery.unique(elems):elems);},clone:function(events){var ret=this.map(function(){if(jQuery.browser.msie&&!jQuery.isXMLDoc(this)){var clone=this.cloneNode(true),container=document.createElement("div");container.appendChild(clone);return jQuery.clean([container.innerHTML])[0];}else
return this.cloneNode(true);});var clone=ret.find("*").andSelf().each(function(){if(this[expando]!=undefined)
this[expando]=null;});if(events===true)
this.find("*").andSelf().each(function(i){if(this.nodeType==3)
return;var events=jQuery.data(this,"events");for(var type in events)
for(var handler in events[type])
jQuery.event.add(clone[i],type,events[type][handler],events[type][handler].data);});return ret;},filter:function(selector){return this.pushStack(jQuery.isFunction(selector)&&jQuery.grep(this,function(elem,i){return selector.call(elem,i);})||jQuery.multiFilter(selector,this));},not:function(selector){if(selector.constructor==String)
if(isSimple.test(selector))
return this.pushStack(jQuery.multiFilter(selector,this,true));else
selector=jQuery.multiFilter(selector,this);var isArrayLike=selector.length&&selector[selector.length-1]!==undefined&&!selector.nodeType;return this.filter(function(){return isArrayLike?jQuery.inArray(this,selector)<0:this!=selector;});},add:function(selector){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),typeof selector=='string'?jQuery(selector):jQuery.makeArray(selector))));},is:function(selector){return!!selector&&jQuery.multiFilter(selector,this).length>0;},hasClass:function(selector){return this.is("."+selector);},val:function(value){if(value==undefined){if(this.length){var elem=this[0];if(jQuery.nodeName(elem,"select")){var index=elem.selectedIndex,values=[],options=elem.options,one=elem.type=="select-one";if(index<0)
return null;for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected){value=jQuery.browser.msie&&!option.attributes.value.specified?option.text:option.value;if(one)
return value;values.push(value);}}
return values;}else
return(this[0].value||"").replace(/\r/g,"");}
return undefined;}
if(value.constructor==Number)
value+='';return this.each(function(){if(this.nodeType!=1)
return;if(value.constructor==Array&&/radio|checkbox/.test(this.type))
this.checked=(jQuery.inArray(this.value,value)>=0||jQuery.inArray(this.name,value)>=0);else if(jQuery.nodeName(this,"select")){var values=jQuery.makeArray(value);jQuery("option",this).each(function(){this.selected=(jQuery.inArray(this.value,values)>=0||jQuery.inArray(this.text,values)>=0);});if(!values.length)
this.selectedIndex=-1;}else
this.value=value;});},html:function(value){return value==undefined?(this[0]?this[0].innerHTML:null):this.empty().append(value);},replaceWith:function(value){return this.after(value).remove();},eq:function(i){return this.slice(i,i+1);},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},andSelf:function(){return this.add(this.prevObject);},data:function(key,value){var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value===undefined){var data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data===undefined&&this.length)
data=jQuery.data(this[0],key);return data===undefined&&parts[1]?this.data(parts[0]):data;}else
return this.trigger("setData"+parts[1]+"!",[parts[0],value]).each(function(){jQuery.data(this,key,value);});},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});},domManip:function(args,table,reverse,callback){var clone=this.length>1,elems;return this.each(function(){if(!elems){elems=jQuery.clean(args,this.ownerDocument);if(reverse)
elems.reverse();}
var obj=this;if(table&&jQuery.nodeName(this,"table")&&jQuery.nodeName(elems[0],"tr"))
obj=this.getElementsByTagName("tbody")[0]||this.appendChild(this.ownerDocument.createElement("tbody"));var scripts=jQuery([]);jQuery.each(elems,function(){var elem=clone?jQuery(this).clone(true)[0]:this;if(jQuery.nodeName(elem,"script"))
scripts=scripts.add(elem);else{if(elem.nodeType==1)
scripts=scripts.add(jQuery("script",elem).remove());callback.call(obj,elem);}});scripts.each(evalScript);});}};jQuery.fn.init.prototype=jQuery.fn;function evalScript(i,elem){if(elem.src)
jQuery.ajax({url:elem.src,async:false,dataType:"script"});else
jQuery.globalEval(elem.text||elem.textContent||elem.innerHTML||"");if(elem.parentNode)
elem.parentNode.removeChild(elem);}
function now(){return+new Date;}
jQuery.extend=jQuery.fn.extend=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=false,options;if(target.constructor==Boolean){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!="object"&&typeof target!="function")
target={};if(length==i){target=this;--i;}
for(;i<length;i++)
if((options=arguments[i])!=null)
for(var name in options){var src=target[name],copy=options[name];if(target===copy)
continue;if(deep&&copy&&typeof copy=="object"&&!copy.nodeType)
target[name]=jQuery.extend(deep,src||(copy.length!=null?[]:{}),copy);else if(copy!==undefined)
target[name]=copy;}
return target;};var expando="jQuery"+now(),uuid=0,windowData={},exclude=/z-?index|font-?weight|opacity|zoom|line-?height/i,defaultView=document.defaultView||{};jQuery.extend({noConflict:function(deep){window.$=_$;if(deep)
window.jQuery=_jQuery;return jQuery;},isFunction:function(fn){return!!fn&&typeof fn!="string"&&!fn.nodeName&&fn.constructor!=Array&&/^[\s[]?function/.test(fn+"");},isXMLDoc:function(elem){return elem.documentElement&&!elem.body||elem.tagName&&elem.ownerDocument&&!elem.ownerDocument.body;},globalEval:function(data){data=jQuery.trim(data);if(data){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script");script.type="text/javascript";if(jQuery.browser.msie)
script.text=data;else
script.appendChild(document.createTextNode(data));head.insertBefore(script,head.firstChild);head.removeChild(script);}},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()==name.toUpperCase();},cache:{},data:function(elem,name,data){elem=elem==window?windowData:elem;var id=elem[expando];if(!id)
id=elem[expando]=++uuid;if(name&&!jQuery.cache[id])
jQuery.cache[id]={};if(data!==undefined)
jQuery.cache[id][name]=data;return name?jQuery.cache[id][name]:id;},removeData:function(elem,name){elem=elem==window?windowData:elem;var id=elem[expando];if(name){if(jQuery.cache[id]){delete jQuery.cache[id][name];name="";for(name in jQuery.cache[id])
break;if(!name)
jQuery.removeData(elem);}}else{try{delete elem[expando];}catch(e){if(elem.removeAttribute)
elem.removeAttribute(expando);}
delete jQuery.cache[id];}},each:function(object,callback,args){var name,i=0,length=object.length;if(args){if(length==undefined){for(name in object)
if(callback.apply(object[name],args)===false)
break;}else
for(;i<length;)
if(callback.apply(object[i++],args)===false)
break;}else{if(length==undefined){for(name in object)
if(callback.call(object[name],name,object[name])===false)
break;}else
for(var value=object[0];i<length&&callback.call(value,i,value)!==false;value=object[++i]){}}
return object;},prop:function(elem,value,type,i,name){if(jQuery.isFunction(value))
value=value.call(elem,i);return value&&value.constructor==Number&&type=="curCSS"&&!exclude.test(name)?value+"px":value;},className:{add:function(elem,classNames){jQuery.each((classNames||"").split(/\s+/),function(i,className){if(elem.nodeType==1&&!jQuery.className.has(elem.className,className))
elem.className+=(elem.className?" ":"")+className;});},remove:function(elem,classNames){if(elem.nodeType==1)
elem.className=classNames!=undefined?jQuery.grep(elem.className.split(/\s+/),function(className){return!jQuery.className.has(classNames,className);}).join(" "):"";},has:function(elem,className){return jQuery.inArray(className,(elem.className||elem).toString().split(/\s+/))>-1;}},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
callback.call(elem);for(var name in options)
elem.style[name]=old[name];},css:function(elem,name,force){if(name=="width"||name=="height"){var val,props={position:"absolute",visibility:"hidden",display:"block"},which=name=="width"?["Left","Right"]:["Top","Bottom"];function getWH(){val=name=="width"?elem.offsetWidth:elem.offsetHeight;var padding=0,border=0;jQuery.each(which,function(){padding+=parseFloat(jQuery.curCSS(elem,"padding"+this,true))||0;border+=parseFloat(jQuery.curCSS(elem,"border"+this+"Width",true))||0;});val-=Math.round(padding+border);}
if(jQuery(elem).is(":visible"))
getWH();else
jQuery.swap(elem,props,getWH);return Math.max(0,val);}
return jQuery.curCSS(elem,name,force);},curCSS:function(elem,name,force){var ret,style=elem.style;function color(elem){if(!jQuery.browser.safari)
return false;var ret=defaultView.getComputedStyle(elem,null);return!ret||ret.getPropertyValue("color")=="";}
if(name=="opacity"&&jQuery.browser.msie){ret=jQuery.attr(style,"opacity");return ret==""?"1":ret;}
if(jQuery.browser.opera&&name=="display"){var save=style.outline;style.outline="0 solid black";style.outline=save;}
if(name.match(/float/i))
name=styleFloat;if(!force&&style&&style[name])
ret=style[name];else if(defaultView.getComputedStyle){if(name.match(/float/i))
name="float";name=name.replace(/([A-Z])/g,"-$1").toLowerCase();var computedStyle=defaultView.getComputedStyle(elem,null);if(computedStyle&&!color(elem))
ret=computedStyle.getPropertyValue(name);else{var swap=[],stack=[],a=elem,i=0;for(;a&&color(a);a=a.parentNode)
stack.unshift(a);for(;i<stack.length;i++)
if(color(stack[i])){swap[i]=stack[i].style.display;stack[i].style.display="block";}
ret=name=="display"&&swap[stack.length-1]!=null?"none":(computedStyle&&computedStyle.getPropertyValue(name))||"";for(i=0;i<swap.length;i++)
if(swap[i]!=null)
stack[i].style.display=swap[i];}
if(name=="opacity"&&ret=="")
ret="1";}else if(elem.currentStyle){var camelCase=name.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase();});ret=elem.currentStyle[name]||elem.currentStyle[camelCase];if(!/^\d+(px)?$/i.test(ret)&&/^\d/.test(ret)){var left=style.left,rsLeft=elem.runtimeStyle.left;elem.runtimeStyle.left=elem.currentStyle.left;style.left=ret||0;ret=style.pixelLeft+"px";style.left=left;elem.runtimeStyle.left=rsLeft;}}
return ret;},clean:function(elems,context){var ret=[];context=context||document;if(typeof context.createElement=='undefined')
context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;jQuery.each(elems,function(i,elem){if(!elem)
return;if(elem.constructor==Number)
elem+='';if(typeof elem=="string"){elem=elem.replace(/(<(\w+)[^>]*?)\/>/g,function(all,front,tag){return tag.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?all:front+"></"+tag+">";});var tags=jQuery.trim(elem).toLowerCase(),div=context.createElement("div");var wrap=!tags.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!tags.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||tags.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!tags.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!tags.indexOf("<td")||!tags.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!tags.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||jQuery.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];div.innerHTML=wrap[1]+elem+wrap[2];while(wrap[0]--)
div=div.lastChild;if(jQuery.browser.msie){var tbody=!tags.indexOf("<table")&&tags.indexOf("<tbody")<0?div.firstChild&&div.firstChild.childNodes:wrap[1]=="<table>"&&tags.indexOf("<tbody")<0?div.childNodes:[];for(var j=tbody.length-1;j>=0;--j)
if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length)
tbody[j].parentNode.removeChild(tbody[j]);if(/^\s/.test(elem))
div.insertBefore(context.createTextNode(elem.match(/^\s*/)[0]),div.firstChild);}
elem=jQuery.makeArray(div.childNodes);}
if(elem.length===0&&(!jQuery.nodeName(elem,"form")&&!jQuery.nodeName(elem,"select")))
return;if(elem[0]==undefined||jQuery.nodeName(elem,"form")||elem.options)
ret.push(elem);else
ret=jQuery.merge(ret,elem);});return ret;},attr:function(elem,name,value){if(!elem||elem.nodeType==3||elem.nodeType==8)
return undefined;var notxml=!jQuery.isXMLDoc(elem),set=value!==undefined,msie=jQuery.browser.msie;name=notxml&&jQuery.props[name]||name;if(elem.tagName){var special=/href|src|style/.test(name);if(name=="selected"&&jQuery.browser.safari)
elem.parentNode.selectedIndex;if(name in elem&&notxml&&!special){if(set){if(name=="type"&&jQuery.nodeName(elem,"input")&&elem.parentNode)
throw"type property can't be changed";elem[name]=value;}
if(jQuery.nodeName(elem,"form")&&elem.getAttributeNode(name))
return elem.getAttributeNode(name).nodeValue;return elem[name];}
if(msie&&notxml&&name=="style")
return jQuery.attr(elem.style,"cssText",value);if(set)
elem.setAttribute(name,""+value);var attr=msie&&notxml&&special?elem.getAttribute(name,2):elem.getAttribute(name);return attr===null?undefined:attr;}
if(msie&&name=="opacity"){if(set){elem.zoom=1;elem.filter=(elem.filter||"").replace(/alpha\([^)]*\)/,"")+
(parseInt(value)+''=="NaN"?"":"alpha(opacity="+value*100+")");}
return elem.filter&&elem.filter.indexOf("opacity=")>=0?(parseFloat(elem.filter.match(/opacity=([^)]*)/)[1])/100)+'':"";}
name=name.replace(/-([a-z])/ig,function(all,letter){return letter.toUpperCase();});if(set)
elem[name]=value;return elem[name];},trim:function(text){return(text||"").replace(/^\s+|\s+$/g,"");},makeArray:function(array){var ret=[];if(array!=null){var i=array.length;if(i==null||array.split||array.setInterval||array.call)
ret[0]=array;else
while(i)
ret[--i]=array[i];}
return ret;},inArray:function(elem,array){for(var i=0,length=array.length;i<length;i++)
if(array[i]===elem)
return i;return-1;},merge:function(first,second){var i=0,elem,pos=first.length;if(jQuery.browser.msie){while(elem=second[i++])
if(elem.nodeType!=8)
first[pos++]=elem;}else
while(elem=second[i++])
first[pos++]=elem;return first;},unique:function(array){var ret=[],done={};try{for(var i=0,length=array.length;i<length;i++){var id=jQuery.data(array[i]);if(!done[id]){done[id]=true;ret.push(array[i]);}}}catch(e){ret=array;}
return ret;},grep:function(elems,callback,inv){var ret=[];for(var i=0,length=elems.length;i<length;i++)
if(!inv!=!callback(elems[i],i))
ret.push(elems[i]);return ret;},map:function(elems,callback){var ret=[];for(var i=0,length=elems.length;i<length;i++){var value=callback(elems[i],i);if(value!=null)
ret[ret.length]=value;}
return ret.concat.apply([],ret);}});var userAgent=navigator.userAgent.toLowerCase();jQuery.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)};var styleFloat=jQuery.browser.msie?"styleFloat":"cssFloat";jQuery.extend({boxModel:!jQuery.browser.msie||document.compatMode=="CSS1Compat",props:{"for":"htmlFor","class":"className","float":styleFloat,cssFloat:styleFloat,styleFloat:styleFloat,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing"}});jQuery.each({parent:function(elem){return elem.parentNode;},parents:function(elem){return jQuery.dir(elem,"parentNode");},next:function(elem){return jQuery.nth(elem,2,"nextSibling");},prev:function(elem){return jQuery.nth(elem,2,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(selector){var ret=jQuery.map(this,fn);if(selector&&typeof selector=="string")
ret=jQuery.multiFilter(selector,ret);return this.pushStack(jQuery.unique(ret));};});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(){var args=arguments;return this.each(function(){for(var i=0,length=args.length;i<length;i++)
jQuery(args[i])[original](this);});};});jQuery.each({removeAttr:function(name){jQuery.attr(this,name,"");if(this.nodeType==1)
this.removeAttribute(name);},addClass:function(classNames){jQuery.className.add(this,classNames);},removeClass:function(classNames){jQuery.className.remove(this,classNames);},toggleClass:function(classNames){jQuery.className[jQuery.className.has(this,classNames)?"remove":"add"](this,classNames);},remove:function(selector){if(!selector||jQuery.filter(selector,[this]).r.length){jQuery("*",this).add(this).each(function(){jQuery.event.remove(this);jQuery.removeData(this);});if(this.parentNode)
this.parentNode.removeChild(this);}},empty:function(){jQuery(">*",this).remove();while(this.firstChild)
this.removeChild(this.firstChild);}},function(name,fn){jQuery.fn[name]=function(){return this.each(fn,arguments);};});jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn[type]=function(size){return this[0]==window?jQuery.browser.opera&&document.body["client"+name]||jQuery.browser.safari&&window["inner"+name]||document.compatMode=="CSS1Compat"&&document.documentElement["client"+name]||document.body["client"+name]:this[0]==document?Math.max(Math.max(document.body["scroll"+name],document.documentElement["scroll"+name]),Math.max(document.body["offset"+name],document.documentElement["offset"+name])):size==undefined?(this.length?jQuery.css(this[0],type):null):this.css(type,size.constructor==String?size:size+"px");};});function num(elem,prop){return elem[0]&&parseInt(jQuery.curCSS(elem[0],prop,true),10)||0;}var chars=jQuery.browser.safari&&parseInt(jQuery.browser.version)<417?"(?:[\\w*_-]|\\\\.)":"(?:[\\w\u0128-\uFFFF*_-]|\\\\.)",quickChild=new RegExp("^>\\s*("+chars+"+)"),quickID=new RegExp("^("+chars+"+)(#)("+chars+"+)"),quickClass=new RegExp("^([#.]?)("+chars+"*)");jQuery.extend({expr:{"":function(a,i,m){return m[2]=="*"||jQuery.nodeName(a,m[2]);},"#":function(a,i,m){return a.getAttribute("id")==m[2];},":":{lt:function(a,i,m){return i<m[3]-0;},gt:function(a,i,m){return i>m[3]-0;},nth:function(a,i,m){return m[3]-0==i;},eq:function(a,i,m){return m[3]-0==i;},first:function(a,i){return i==0;},last:function(a,i,m,r){return i==r.length-1;},even:function(a,i){return i%2==0;},odd:function(a,i){return i%2;},"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]==a;},"last-child":function(a){return jQuery.nth(a.parentNode.lastChild,1,"previousSibling")==a;},"only-child":function(a){return!jQuery.nth(a.parentNode.lastChild,2,"previousSibling");},parent:function(a){return a.firstChild;},empty:function(a){return!a.firstChild;},contains:function(a,i,m){return(a.textContent||a.innerText||jQuery(a).text()||"").indexOf(m[3])>=0;},visible:function(a){return"hidden"!=a.type&&jQuery.css(a,"display")!="none"&&jQuery.css(a,"visibility")!="hidden";},hidden:function(a){return"hidden"==a.type||jQuery.css(a,"display")=="none"||jQuery.css(a,"visibility")=="hidden";},enabled:function(a){return!a.disabled;},disabled:function(a){return a.disabled;},checked:function(a){return a.checked;},selected:function(a){return a.selected||jQuery.attr(a,"selected");},text:function(a){return"text"==a.type;},radio:function(a){return"radio"==a.type;},checkbox:function(a){return"checkbox"==a.type;},file:function(a){return"file"==a.type;},password:function(a){return"password"==a.type;},submit:function(a){return"submit"==a.type;},image:function(a){return"image"==a.type;},reset:function(a){return"reset"==a.type;},button:function(a){return"button"==a.type||jQuery.nodeName(a,"button");},input:function(a){return/input|select|textarea|button/i.test(a.nodeName);},has:function(a,i,m){return jQuery.find(m[3],a).length;},header:function(a){return/h\d/i.test(a.nodeName);},animated:function(a){return jQuery.grep(jQuery.timers,function(fn){return a==fn.elem;}).length;}}},parse:[/^(\[) *@?([\w-]+) *([!*$^~=]*) *('?"?)(.*?)\4 *\]/,/^(:)([\w-]+)\("?'?(.*?(\(.*?\))?[^(]*?)"?'?\)/,new RegExp("^([:.#]*)("+chars+"+)")],multiFilter:function(expr,elems,not){var old,cur=[];while(expr&&expr!=old){old=expr;var f=jQuery.filter(expr,elems,not);expr=f.t.replace(/^\s*,\s*/,"");cur=not?elems=f.r:jQuery.merge(cur,f.r);}
return cur;},find:function(t,context){if(typeof t!="string")
return[t];if(context&&context.nodeType!=1&&context.nodeType!=9)
return[];context=context||document;var ret=[context],done=[],last,nodeName;while(t&&last!=t){var r=[];last=t;t=jQuery.trim(t);var foundToken=false,re=quickChild,m=re.exec(t);if(m){nodeName=m[1].toUpperCase();for(var i=0;ret[i];i++)
for(var c=ret[i].firstChild;c;c=c.nextSibling)
if(c.nodeType==1&&(nodeName=="*"||c.nodeName.toUpperCase()==nodeName))
r.push(c);ret=r;t=t.replace(re,"");if(t.indexOf(" ")==0)continue;foundToken=true;}else{re=/^([>+~])\s*(\w*)/i;if((m=re.exec(t))!=null){r=[];var merge={};nodeName=m[2].toUpperCase();m=m[1];for(var j=0,rl=ret.length;j<rl;j++){var n=m=="~"||m=="+"?ret[j].nextSibling:ret[j].firstChild;for(;n;n=n.nextSibling)
if(n.nodeType==1){var id=jQuery.data(n);if(m=="~"&&merge[id])break;if(!nodeName||n.nodeName.toUpperCase()==nodeName){if(m=="~")merge[id]=true;r.push(n);}
if(m=="+")break;}}
ret=r;t=jQuery.trim(t.replace(re,""));foundToken=true;}}
if(t&&!foundToken){if(!t.indexOf(",")){if(context==ret[0])ret.shift();done=jQuery.merge(done,ret);r=ret=[context];t=" "+t.substr(1,t.length);}else{var re2=quickID;var m=re2.exec(t);if(m){m=[0,m[2],m[3],m[1]];}else{re2=quickClass;m=re2.exec(t);}
m[2]=m[2].replace(/\\/g,"");var elem=ret[ret.length-1];if(m[1]=="#"&&elem&&elem.getElementById&&!jQuery.isXMLDoc(elem)){var oid=elem.getElementById(m[2]);if((jQuery.browser.msie||jQuery.browser.opera)&&oid&&typeof oid.id=="string"&&oid.id!=m[2])
oid=jQuery('[@id="'+m[2]+'"]',elem)[0];ret=r=oid&&(!m[3]||jQuery.nodeName(oid,m[3]))?[oid]:[];}else{for(var i=0;ret[i];i++){var tag=m[1]=="#"&&m[3]?m[3]:m[1]!=""||m[0]==""?"*":m[2];if(tag=="*"&&ret[i].nodeName.toLowerCase()=="object")
tag="param";r=jQuery.merge(r,ret[i].getElementsByTagName(tag));}
if(m[1]==".")
r=jQuery.classFilter(r,m[2]);if(m[1]=="#"){var tmp=[];for(var i=0;r[i];i++)
if(r[i].getAttribute("id")==m[2]){tmp=[r[i]];break;}
r=tmp;}
ret=r;}
t=t.replace(re2,"");}}
if(t){var val=jQuery.filter(t,r);ret=r=val.r;t=jQuery.trim(val.t);}}
if(t)
ret=[];if(ret&&context==ret[0])
ret.shift();done=jQuery.merge(done,ret);return done;},classFilter:function(r,m,not){m=" "+m+" ";var tmp=[];for(var i=0;r[i];i++){var pass=(" "+r[i].className+" ").indexOf(m)>=0;if(!not&&pass||not&&!pass)
tmp.push(r[i]);}
return tmp;},filter:function(t,r,not){var last;while(t&&t!=last){last=t;var p=jQuery.parse,m;for(var i=0;p[i];i++){m=p[i].exec(t);if(m){t=t.substring(m[0].length);m[2]=m[2].replace(/\\/g,"");break;}}
if(!m)
break;if(m[1]==":"&&m[2]=="not")
r=isSimple.test(m[3])?jQuery.filter(m[3],r,true).r:jQuery(r).not(m[3]);else if(m[1]==".")
r=jQuery.classFilter(r,m[2],not);else if(m[1]=="["){var tmp=[],type=m[3];for(var i=0,rl=r.length;i<rl;i++){var a=r[i],z=a[jQuery.props[m[2]]||m[2]];if(z==null||/href|src|selected/.test(m[2]))
z=jQuery.attr(a,m[2])||'';if((type==""&&!!z||type=="="&&z==m[5]||type=="!="&&z!=m[5]||type=="^="&&z&&!z.indexOf(m[5])||type=="$="&&z.substr(z.length-m[5].length)==m[5]||(type=="*="||type=="~=")&&z.indexOf(m[5])>=0)^not)
tmp.push(a);}
r=tmp;}else if(m[1]==":"&&m[2]=="nth-child"){var merge={},tmp=[],test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(m[3]=="even"&&"2n"||m[3]=="odd"&&"2n+1"||!/\D/.test(m[3])&&"0n+"+m[3]||m[3]),first=(test[1]+(test[2]||1))-0,last=test[3]-0;for(var i=0,rl=r.length;i<rl;i++){var node=r[i],parentNode=node.parentNode,id=jQuery.data(parentNode);if(!merge[id]){var c=1;for(var n=parentNode.firstChild;n;n=n.nextSibling)
if(n.nodeType==1)
n.nodeIndex=c++;merge[id]=true;}
var add=false;if(first==0){if(node.nodeIndex==last)
add=true;}else if((node.nodeIndex-last)%first==0&&(node.nodeIndex-last)/first>=0)
add=true;if(add^not)
tmp.push(node);}
r=tmp;}else{var fn=jQuery.expr[m[1]];if(typeof fn=="object")
fn=fn[m[2]];if(typeof fn=="string")
fn=eval("false||function(a,i){return "+fn+";}");r=jQuery.grep(r,function(elem,i){return fn(elem,i,m,r);},not);}}
return{r:r,t:t};},dir:function(elem,dir){var matched=[],cur=elem[dir];while(cur&&cur!=document){if(cur.nodeType==1)
matched.push(cur);cur=cur[dir];}
return matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir])
if(cur.nodeType==1&&++num==result)
break;return cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType==1&&n!=elem)
r.push(n);}
return r;}});jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType==3||elem.nodeType==8)
return;if(jQuery.browser.msie&&elem.setInterval)
elem=window;if(!handler.guid)
handler.guid=this.guid++;if(data!=undefined){var fn=handler;handler=this.proxy(fn,function(){return fn.apply(this,arguments);});handler.data=data;}
var events=jQuery.data(elem,"events")||jQuery.data(elem,"events",{}),handle=jQuery.data(elem,"handle")||jQuery.data(elem,"handle",function(){if(typeof jQuery!="undefined"&&!jQuery.event.triggered)
return jQuery.event.handle.apply(arguments.callee.elem,arguments);});handle.elem=elem;jQuery.each(types.split(/\s+/),function(index,type){var parts=type.split(".");type=parts[0];handler.type=parts[1];var handlers=events[type];if(!handlers){handlers=events[type]={};if(!jQuery.event.special[type]||jQuery.event.special[type].setup.call(elem)===false){if(elem.addEventListener)
elem.addEventListener(type,handle,false);else if(elem.attachEvent)
elem.attachEvent("on"+type,handle);}}
handlers[handler.guid]=handler;jQuery.event.global[type]=true;});elem=null;},guid:1,global:{},remove:function(elem,types,handler){if(elem.nodeType==3||elem.nodeType==8)
return;var events=jQuery.data(elem,"events"),ret,index;if(events){if(types==undefined||(typeof types=="string"&&types.charAt(0)=="."))
for(var type in events)
this.remove(elem,type+(types||""));else{if(types.type){handler=types.handler;types=types.type;}
jQuery.each(types.split(/\s+/),function(index,type){var parts=type.split(".");type=parts[0];if(events[type]){if(handler)
delete events[type][handler.guid];else
for(handler in events[type])
if(!parts[1]||events[type][handler].type==parts[1])
delete events[type][handler];for(ret in events[type])break;if(!ret){if(!jQuery.event.special[type]||jQuery.event.special[type].teardown.call(elem)===false){if(elem.removeEventListener)
elem.removeEventListener(type,jQuery.data(elem,"handle"),false);else if(elem.detachEvent)
elem.detachEvent("on"+type,jQuery.data(elem,"handle"));}
ret=null;delete events[type];}}});}
for(ret in events)break;if(!ret){var handle=jQuery.data(elem,"handle");if(handle)handle.elem=null;jQuery.removeData(elem,"events");jQuery.removeData(elem,"handle");}}},trigger:function(type,data,elem,donative,extra){data=jQuery.makeArray(data);if(type.indexOf("!")>=0){type=type.slice(0,-1);var exclusive=true;}
if(!elem){if(this.global[type])
jQuery("*").add([window,document]).trigger(type,data);}else{if(elem.nodeType==3||elem.nodeType==8)
return undefined;var val,ret,fn=jQuery.isFunction(elem[type]||null),event=!data[0]||!data[0].preventDefault;if(event){data.unshift({type:type,target:elem,preventDefault:function(){},stopPropagation:function(){},timeStamp:now()});data[0][expando]=true;}
data[0].type=type;if(exclusive)
data[0].exclusive=true;var handle=jQuery.data(elem,"handle");if(handle)
val=handle.apply(elem,data);if((!fn||(jQuery.nodeName(elem,'a')&&type=="click"))&&elem["on"+type]&&elem["on"+type].apply(elem,data)===false)
val=false;if(event)
data.shift();if(extra&&jQuery.isFunction(extra)){ret=extra.apply(elem,val==null?data:data.concat(val));if(ret!==undefined)
val=ret;}
if(fn&&donative!==false&&val!==false&&!(jQuery.nodeName(elem,'a')&&type=="click")){this.triggered=true;try{elem[type]();}catch(e){}}
this.triggered=false;}
return val;},handle:function(event){var val,ret,namespace,all,handlers;event=arguments[0]=jQuery.event.fix(event||window.event);namespace=event.type.split(".");event.type=namespace[0];namespace=namespace[1];all=!namespace&&!event.exclusive;handlers=(jQuery.data(this,"events")||{})[event.type];for(var j in handlers){var handler=handlers[j];if(all||handler.type==namespace){event.handler=handler;event.data=handler.data;ret=handler.apply(this,arguments);if(val!==false)
val=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}}
return val;},fix:function(event){if(event[expando]==true)
return event;var originalEvent=event;event={originalEvent:originalEvent};var props="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view wheelDelta which".split(" ");for(var i=props.length;i;i--)
event[props[i]]=originalEvent[props[i]];event[expando]=true;event.preventDefault=function(){if(originalEvent.preventDefault)
originalEvent.preventDefault();originalEvent.returnValue=false;};event.stopPropagation=function(){if(originalEvent.stopPropagation)
originalEvent.stopPropagation();originalEvent.cancelBubble=true;};event.timeStamp=event.timeStamp||now();if(!event.target)
event.target=event.srcElement||document;if(event.target.nodeType==3)
event.target=event.target.parentNode;if(!event.relatedTarget&&event.fromElement)
event.relatedTarget=event.fromElement==event.target?event.toElement:event.fromElement;if(event.pageX==null&&event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc.clientTop||0);}
if(!event.which&&((event.charCode||event.charCode===0)?event.charCode:event.keyCode))
event.which=event.charCode||event.keyCode;if(!event.metaKey&&event.ctrlKey)
event.metaKey=event.ctrlKey;if(!event.which&&event.button)
event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)));return event;},proxy:function(fn,proxy){proxy.guid=fn.guid=fn.guid||proxy.guid||this.guid++;return proxy;},special:{ready:{setup:function(){bindReady();return;},teardown:function(){return;}},mouseenter:{setup:function(){if(jQuery.browser.msie)return false;jQuery(this).bind("mouseover",jQuery.event.special.mouseenter.handler);return true;},teardown:function(){if(jQuery.browser.msie)return false;jQuery(this).unbind("mouseover",jQuery.event.special.mouseenter.handler);return true;},handler:function(event){if(withinElement(event,this))return true;event.type="mouseenter";return jQuery.event.handle.apply(this,arguments);}},mouseleave:{setup:function(){if(jQuery.browser.msie)return false;jQuery(this).bind("mouseout",jQuery.event.special.mouseleave.handler);return true;},teardown:function(){if(jQuery.browser.msie)return false;jQuery(this).unbind("mouseout",jQuery.event.special.mouseleave.handler);return true;},handler:function(event){if(withinElement(event,this))return true;event.type="mouseleave";return jQuery.event.handle.apply(this,arguments);}}}};jQuery.fn.extend({bind:function(type,data,fn){return type=="unload"?this.one(type,data,fn):this.each(function(){jQuery.event.add(this,type,fn||data,fn&&data);});},one:function(type,data,fn){var one=jQuery.event.proxy(fn||data,function(event){jQuery(this).unbind(event,one);return(fn||data).apply(this,arguments);});return this.each(function(){jQuery.event.add(this,type,one,fn&&data);});},unbind:function(type,fn){return this.each(function(){jQuery.event.remove(this,type,fn);});},trigger:function(type,data,fn){return this.each(function(){jQuery.event.trigger(type,data,this,true,fn);});},triggerHandler:function(type,data,fn){return this[0]&&jQuery.event.trigger(type,data,this[0],false,fn);},toggle:function(fn){var args=arguments,i=1;while(i<args.length)
jQuery.event.proxy(fn,args[i++]);return this.click(jQuery.event.proxy(fn,function(event){this.lastToggle=(this.lastToggle||0)%i;event.preventDefault();return args[this.lastToggle++].apply(this,arguments)||false;}));},hover:function(fnOver,fnOut){return this.bind('mouseenter',fnOver).bind('mouseleave',fnOut);},ready:function(fn){bindReady();if(jQuery.isReady)
fn.call(document,jQuery);else
jQuery.readyList.push(function(){return fn.call(this,jQuery);});return this;}});jQuery.extend({isReady:false,readyList:[],ready:function(){if(!jQuery.isReady){jQuery.isReady=true;if(jQuery.readyList){jQuery.each(jQuery.readyList,function(){this.call(document);});jQuery.readyList=null;}
jQuery(document).triggerHandler("ready");}}});var readyBound=false;function bindReady(){if(readyBound)return;readyBound=true;if(document.addEventListener&&!jQuery.browser.opera)
document.addEventListener("DOMContentLoaded",jQuery.ready,false);if(jQuery.browser.msie&&window==top)(function(){if(jQuery.isReady)return;try{document.documentElement.doScroll("left");}catch(error){setTimeout(arguments.callee,0);return;}
jQuery.ready();})();if(jQuery.browser.opera)
document.addEventListener("DOMContentLoaded",function(){if(jQuery.isReady)return;for(var i=0;i<document.styleSheets.length;i++)
if(document.styleSheets[i].disabled){setTimeout(arguments.callee,0);return;}
jQuery.ready();},false);if(jQuery.browser.safari){var numStyles;(function(){if(jQuery.isReady)return;if(document.readyState!="loaded"&&document.readyState!="complete"){setTimeout(arguments.callee,0);return;}
if(numStyles===undefined)
numStyles=jQuery("style, link[rel=stylesheet]").length;if(document.styleSheets.length!=numStyles){setTimeout(arguments.callee,0);return;}
jQuery.ready();})();}
jQuery.event.add(window,"load",jQuery.ready);}
jQuery.each(("blur,focus,load,resize,scroll,unload,click,dblclick,"+"mousedown,mouseup,mousemove,mouseover,mouseout,change,select,"+"submit,keydown,keypress,keyup,error").split(","),function(i,name){jQuery.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name);};});var withinElement=function(event,elem){var parent=event.relatedTarget;while(parent&&parent!=elem)try{parent=parent.parentNode;}catch(error){parent=elem;}
return parent==elem;};jQuery(window).bind("unload",function(){jQuery("*").add(document).unbind();});jQuery.fn.extend({_load:jQuery.fn.load,load:function(url,params,callback){if(typeof url!='string')
return this._load(url);var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}
callback=callback||function(){};var type="GET";if(params)
if(jQuery.isFunction(params)){callback=params;params=null;}else{params=jQuery.param(params);type="POST";}
var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(res,status){if(status=="success"||status=="notmodified")
self.html(selector?jQuery("<div/>").append(res.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):res.responseText);self.each(callback,[res.responseText,status,res]);}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return jQuery.nodeName(this,"form")?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:val.constructor==Array?jQuery.map(val,function(val,i){return{name:elem.name,value:val};}):{name:elem.name,value:val};}).get();}});jQuery.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f);};});var jsc=now();jQuery.extend({get:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data=null;}
return jQuery.ajax({type:"GET",url:url,data:data,success:callback,dataType:type});},getScript:function(url,callback){return jQuery.get(url,null,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},post:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data={};}
return jQuery.ajax({type:"POST",url:url,data:data,success:callback,dataType:type});},ajaxSetup:function(settings){jQuery.extend(jQuery.ajaxSettings,settings);},ajaxSettings:{url:location.href,global:true,type:"GET",timeout:0,contentType:"application/x-www-form-urlencoded",processData:true,async:true,data:null,username:null,password:null,accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(s){s=jQuery.extend(true,s,jQuery.extend(true,{},jQuery.ajaxSettings,s));var jsonp,jsre=/=\?(&|$)/g,status,data,type=s.type.toUpperCase();if(s.data&&s.processData&&typeof s.data!="string")
s.data=jQuery.param(s.data);if(s.dataType=="jsonp"){if(type=="GET"){if(!s.url.match(jsre))
s.url+=(s.url.match(/\?/)?"&":"?")+(s.jsonp||"callback")+"=?";}else if(!s.data||!s.data.match(jsre))
s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?";s.dataType="json";}
if(s.dataType=="json"&&(s.data&&s.data.match(jsre)||s.url.match(jsre))){jsonp="jsonp"+jsc++;if(s.data)
s.data=(s.data+"").replace(jsre,"="+jsonp+"$1");s.url=s.url.replace(jsre,"="+jsonp+"$1");s.dataType="script";window[jsonp]=function(tmp){data=tmp;success();complete();window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}
if(head)
head.removeChild(script);};}
if(s.dataType=="script"&&s.cache==null)
s.cache=false;if(s.cache===false&&type=="GET"){var ts=now();var ret=s.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+ts+"$2");s.url=ret+((ret==s.url)?(s.url.match(/\?/)?"&":"?")+"_="+ts:"");}
if(s.data&&type=="GET"){s.url+=(s.url.match(/\?/)?"&":"?")+s.data;s.data=null;}
if(s.global&&!jQuery.active++)
jQuery.event.trigger("ajaxStart");var remote=/^(?:\w+:)?\/\/([^\/?#]+)/;if(s.dataType=="script"&&type=="GET"&&remote.test(s.url)&&remote.exec(s.url)[1]!=location.host){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.src=s.url;if(s.scriptCharset)
script.charset=s.scriptCharset;if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;success();complete();head.removeChild(script);}};}
head.appendChild(script);return undefined;}
var requestDone=false;var xhr=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest();if(s.username)
xhr.open(type,s.url,s.async,s.username,s.password);else
xhr.open(type,s.url,s.async);try{if(s.data)
xhr.setRequestHeader("Content-Type",s.contentType);if(s.ifModified)
xhr.setRequestHeader("If-Modified-Since",jQuery.lastModified[s.url]||"Thu, 01 Jan 1970 00:00:00 GMT");xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.setRequestHeader("Accept",s.dataType&&s.accepts[s.dataType]?s.accepts[s.dataType]+", */*":s.accepts._default);}catch(e){}
if(s.beforeSend&&s.beforeSend(xhr,s)===false){s.global&&jQuery.active--;xhr.abort();return false;}
if(s.global)
jQuery.event.trigger("ajaxSend",[xhr,s]);var onreadystatechange=function(isTimeout){if(!requestDone&&xhr&&(xhr.readyState==4||isTimeout=="timeout")){requestDone=true;if(ival){clearInterval(ival);ival=null;}
status=isTimeout=="timeout"&&"timeout"||!jQuery.httpSuccess(xhr)&&"error"||s.ifModified&&jQuery.httpNotModified(xhr,s.url)&&"notmodified"||"success";if(status=="success"){try{data=jQuery.httpData(xhr,s.dataType,s.dataFilter);}catch(e){status="parsererror";}}
if(status=="success"){var modRes;try{modRes=xhr.getResponseHeader("Last-Modified");}catch(e){}
if(s.ifModified&&modRes)
jQuery.lastModified[s.url]=modRes;if(!jsonp)
success();}else
jQuery.handleError(s,xhr,status);complete();if(s.async)
xhr=null;}};if(s.async){var ival=setInterval(onreadystatechange,13);if(s.timeout>0)
setTimeout(function(){if(xhr){xhr.abort();if(!requestDone)
onreadystatechange("timeout");}},s.timeout);}
try{xhr.send(s.data);}catch(e){jQuery.handleError(s,xhr,null,e);}
if(!s.async)
onreadystatechange();function success(){if(s.success)
s.success(data,status);if(s.global)
jQuery.event.trigger("ajaxSuccess",[xhr,s]);}
function complete(){if(s.complete)
s.complete(xhr,status);if(s.global)
jQuery.event.trigger("ajaxComplete",[xhr,s]);if(s.global&&!--jQuery.active)
jQuery.event.trigger("ajaxStop");}
return xhr;},handleError:function(s,xhr,status,e){if(s.error)s.error(xhr,status,e);if(s.global)
jQuery.event.trigger("ajaxError",[xhr,s,e]);},active:0,httpSuccess:function(xhr){try{return!xhr.status&&location.protocol=="file:"||(xhr.status>=200&&xhr.status<300)||xhr.status==304||xhr.status==1223||jQuery.browser.safari&&xhr.status==undefined;}catch(e){}
return false;},httpNotModified:function(xhr,url){try{var xhrRes=xhr.getResponseHeader("Last-Modified");return xhr.status==304||xhrRes==jQuery.lastModified[url]||jQuery.browser.safari&&xhr.status==undefined;}catch(e){}
return false;},httpData:function(xhr,type,filter){var ct=xhr.getResponseHeader("content-type"),xml=type=="xml"||!type&&ct&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.tagName=="parsererror")
throw"parsererror";if(filter)
data=filter(data,type);if(type=="script")
jQuery.globalEval(data);if(type=="json")
data=eval("("+data+")");return data;},param:function(a){var s=[];if(a.constructor==Array||a.jquery)
jQuery.each(a,function(){s.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value));});else
for(var j in a)
if(a[j]&&a[j].constructor==Array)
jQuery.each(a[j],function(){s.push(encodeURIComponent(j)+"="+encodeURIComponent(this));});else
s.push(encodeURIComponent(j)+"="+encodeURIComponent(jQuery.isFunction(a[j])?a[j]():a[j]));return s.join("&").replace(/%20/g,"+");}});jQuery.fn.extend({show:function(speed,callback){return speed?this.animate({height:"show",width:"show",opacity:"show"},speed,callback):this.filter(":hidden").each(function(){this.style.display=this.oldblock||"";if(jQuery.css(this,"display")=="none"){var elem=jQuery("<"+this.tagName+" />").appendTo("body");this.style.display=elem.css("display");if(this.style.display=="none")
this.style.display="block";elem.remove();}}).end();},hide:function(speed,callback){return speed?this.animate({height:"hide",width:"hide",opacity:"hide"},speed,callback):this.filter(":visible").each(function(){this.oldblock=this.oldblock||jQuery.css(this,"display");this.style.display="none";}).end();},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2){return jQuery.isFunction(fn)&&jQuery.isFunction(fn2)?this._toggle.apply(this,arguments):fn?this.animate({height:"toggle",width:"toggle",opacity:"toggle"},fn,fn2):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]();});},slideDown:function(speed,callback){return this.animate({height:"show"},speed,callback);},slideUp:function(speed,callback){return this.animate({height:"hide"},speed,callback);},slideToggle:function(speed,callback){return this.animate({height:"toggle"},speed,callback);},fadeIn:function(speed,callback){return this.animate({opacity:"show"},speed,callback);},fadeOut:function(speed,callback){return this.animate({opacity:"hide"},speed,callback);},fadeTo:function(speed,to,callback){return this.animate({opacity:to},speed,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);return this[optall.queue===false?"each":"queue"](function(){if(this.nodeType!=1)
return false;var opt=jQuery.extend({},optall),p,hidden=jQuery(this).is(":hidden"),self=this;for(p in prop){if(prop[p]=="hide"&&hidden||prop[p]=="show"&&!hidden)
return opt.complete.call(this);if(p=="height"||p=="width"){opt.display=jQuery.css(this,"display");opt.overflow=this.style.overflow;}}
if(opt.overflow!=null)
this.style.overflow="hidden";opt.curAnim=jQuery.extend({},prop);jQuery.each(prop,function(name,val){var e=new jQuery.fx(self,opt,name);if(/toggle|show|hide/.test(val))
e[val=="toggle"?hidden?"show":"hide":val](prop);else{var parts=val.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),start=e.cur(true)||0;if(parts){var end=parseFloat(parts[2]),unit=parts[3]||"px";if(unit!="px"){self.style[name]=(end||1)+unit;start=((end||1)/e.cur(true))*start;self.style[name]=start+unit;}
if(parts[1])
end=((parts[1]=="-="?-1:1)*end)+start;e.custom(start,end,unit);}else
e.custom(start,val,"");}});return true;});},queue:function(type,fn){if(jQuery.isFunction(type)||(type&&type.constructor==Array)){fn=type;type="fx";}
if(!type||(typeof type=="string"&&!fn))
return queue(this[0],type);return this.each(function(){if(fn.constructor==Array)
queue(this,type,fn);else{queue(this,type).push(fn);if(queue(this,type).length==1)
fn.call(this);}});},stop:function(clearQueue,gotoEnd){var timers=jQuery.timers;if(clearQueue)
this.queue([]);this.each(function(){for(var i=timers.length-1;i>=0;i--)
if(timers[i].elem==this){if(gotoEnd)
timers[i](true);timers.splice(i,1);}});if(!gotoEnd)
this.dequeue();return this;}});var queue=function(elem,type,array){if(elem){type=type||"fx";var q=jQuery.data(elem,type+"queue");if(!q||array)
q=jQuery.data(elem,type+"queue",jQuery.makeArray(array));}
return q;};jQuery.fn.dequeue=function(type){type=type||"fx";return this.each(function(){var q=queue(this,type);q.shift();if(q.length)
q[0].call(this);});};jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&speed.constructor==Object?speed:{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&easing.constructor!=Function&&easing};opt.duration=(opt.duration&&opt.duration.constructor==Number?opt.duration:jQuery.fx.speeds[opt.duration])||jQuery.fx.speeds.def;opt.old=opt.complete;opt.complete=function(){if(opt.queue!==false)
jQuery(this).dequeue();if(jQuery.isFunction(opt.old))
opt.old.call(this);};return opt;},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p;},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum;}},timers:[],timerId:null,fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;if(!options.orig)
options.orig={};}});jQuery.fx.prototype={update:function(){if(this.options.step)
this.options.step.call(this.elem,this.now,this);(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);if(this.prop=="height"||this.prop=="width")
this.elem.style.display="block";},cur:function(force){if(this.elem[this.prop]!=null&&this.elem.style[this.prop]==null)
return this.elem[this.prop];var r=parseFloat(jQuery.css(this.elem,this.prop,force));return r&&r>-10000?r:parseFloat(jQuery.curCSS(this.elem,this.prop))||0;},custom:function(from,to,unit){this.startTime=now();this.start=from;this.end=to;this.unit=unit||this.unit||"px";this.now=this.start;this.pos=this.state=0;this.update();var self=this;function t(gotoEnd){return self.step(gotoEnd);}
t.elem=this.elem;jQuery.timers.push(t);if(jQuery.timerId==null){jQuery.timerId=setInterval(function(){var timers=jQuery.timers;for(var i=0;i<timers.length;i++)
if(!timers[i]())
timers.splice(i--,1);if(!timers.length){clearInterval(jQuery.timerId);jQuery.timerId=null;}},13);}},show:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop);this.options.show=true;this.custom(0,this.cur());if(this.prop=="width"||this.prop=="height")
this.elem.style[this.prop]="1px";jQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(gotoEnd){var t=now();if(gotoEnd||t>this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var done=true;for(var i in this.options.curAnim)
if(this.options.curAnim[i]!==true)
done=false;if(done){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(jQuery.css(this.elem,"display")=="none")
this.elem.style.display="block";}
if(this.options.hide)
this.elem.style.display="none";if(this.options.hide||this.options.show)
for(var p in this.options.curAnim)
jQuery.attr(this.elem.style,p,this.options.orig[p]);}
if(done)
this.options.complete.call(this.elem);return false;}else{var n=t-this.startTime;this.state=n/this.options.duration;this.pos=jQuery.easing[this.options.easing||(jQuery.easing.swing?"swing":"linear")](this.state,n,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update();}
return true;}};jQuery.extend(jQuery.fx,{speeds:{slow:600,fast:200,def:400},step:{scrollLeft:function(fx){fx.elem.scrollLeft=fx.now;},scrollTop:function(fx){fx.elem.scrollTop=fx.now;},opacity:function(fx){jQuery.attr(fx.elem.style,"opacity",fx.now);},_default:function(fx){fx.elem.style[fx.prop]=fx.now+fx.unit;}}});jQuery.fn.offset=function(){var left=0,top=0,elem=this[0],results;if(elem)with(jQuery.browser){var parent=elem.parentNode,offsetChild=elem,offsetParent=elem.offsetParent,doc=elem.ownerDocument,safari2=safari&&parseInt(version)<522&&!/adobeair/i.test(userAgent),css=jQuery.curCSS,fixed=css(elem,"position")=="fixed";if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect();add(box.left+Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),box.top+Math.max(doc.documentElement.scrollTop,doc.body.scrollTop));add(-doc.documentElement.clientLeft,-doc.documentElement.clientTop);}else{add(elem.offsetLeft,elem.offsetTop);while(offsetParent){add(offsetParent.offsetLeft,offsetParent.offsetTop);if(mozilla&&!/^t(able|d|h)$/i.test(offsetParent.tagName)||safari&&!safari2)
border(offsetParent);if(!fixed&&css(offsetParent,"position")=="fixed")
fixed=true;offsetChild=/^body$/i.test(offsetParent.tagName)?offsetChild:offsetParent;offsetParent=offsetParent.offsetParent;}
while(parent&&parent.tagName&&!/^body|html$/i.test(parent.tagName)){if(!/^inline|table.*$/i.test(css(parent,"display")))
add(-parent.scrollLeft,-parent.scrollTop);if(mozilla&&css(parent,"overflow")!="visible")
border(parent);parent=parent.parentNode;}
if((safari2&&(fixed||css(offsetChild,"position")=="absolute"))||(mozilla&&css(offsetChild,"position")!="absolute"))
add(-doc.body.offsetLeft,-doc.body.offsetTop);if(fixed)
add(Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),Math.max(doc.documentElement.scrollTop,doc.body.scrollTop));}
results={top:top,left:left};}
function border(elem){add(jQuery.curCSS(elem,"borderLeftWidth",true),jQuery.curCSS(elem,"borderTopWidth",true));}
function add(l,t){left+=parseInt(l,10)||0;top+=parseInt(t,10)||0;}
return results;};jQuery.fn.extend({position:function(){var left=0,top=0,results;if(this[0]){var offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent[0].tagName)?{top:0,left:0}:offsetParent.offset();offset.top-=num(this,'marginTop');offset.left-=num(this,'marginLeft');parentOffset.top+=num(offsetParent,'borderTopWidth');parentOffset.left+=num(offsetParent,'borderLeftWidth');results={top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};}
return results;},offsetParent:function(){var offsetParent=this[0].offsetParent;while(offsetParent&&(!/^body|html$/i.test(offsetParent.tagName)&&jQuery.css(offsetParent,'position')=='static'))
offsetParent=offsetParent.offsetParent;return jQuery(offsetParent);}});jQuery.each(['Left','Top'],function(i,name){var method='scroll'+name;jQuery.fn[method]=function(val){if(!this[0])return;return val!=undefined?this.each(function(){this==window||this==document?window.scrollTo(!i?val:jQuery(window).scrollLeft(),i?val:jQuery(window).scrollTop()):this[method]=val;}):this[0]==window||this[0]==document?self[i?'pageYOffset':'pageXOffset']||jQuery.boxModel&&document.documentElement[method]||document.body[method]:this[0][method];};});jQuery.each(["Height","Width"],function(i,name){var tl=i?"Left":"Top",br=i?"Right":"Bottom";jQuery.fn["inner"+name]=function(){return this[name.toLowerCase()]()+
num(this,"padding"+tl)+
num(this,"padding"+br);};jQuery.fn["outer"+name]=function(margin){return this["inner"+name]()+
num(this,"border"+tl+"Width")+
num(this,"border"+br+"Width")+
(margin?num(this,"margin"+tl)+num(this,"margin"+br):0);};});})();;(function($){$.ui=$.ui||{};$.extend($.ui,{plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,arguments){var set=instance.plugins[name];if(!set)return;for(var i=0;i<set.length;i++){if(instance.options[set[i][0]])set[i][1].apply(instance.element,arguments);}}},cssCache:{},css:function(name){if($.ui.cssCache[name])return $.ui.cssCache[name];var tmp=$('<div class="ui-resizable-gen">').addClass(name).css({position:'absolute',top:'-5000px',left:'-5000px',display:'block'}).appendTo('body');$.ui.cssCache[name]=!!((!/auto|default/.test(tmp.css('cursor'))||(/^[1-9]/).test(tmp.css('height'))||(/^[1-9]/).test(tmp.css('width'))||!(/none/).test(tmp.css('backgroundImage'))||!(/transparent|rgba\(0, 0, 0, 0\)/).test(tmp.css('backgroundColor'))));try{$('body').get(0).removeChild(tmp.get(0));}catch(e){}
return $.ui.cssCache[name];},disableSelection:function(e){e.unselectable="on";e.onselectstart=function(){return false;};if(e.style)e.style.MozUserSelect="none";},enableSelection:function(e){e.unselectable="off";e.onselectstart=function(){return true;};if(e.style)e.style.MozUserSelect="";},hasScroll:function(e,a){var scroll=/top/.test(a||"top")?'scrollTop':'scrollLeft',has=false;if(e[scroll]>0)return true;e[scroll]=1;has=e[scroll]>0?true:false;e[scroll]=0;return has;}});$.each(['Left','Top'],function(i,name){if(!$.fn['scroll'+name])$.fn['scroll'+name]=function(v){return v!=undefined?this.each(function(){this==window||this==document?window.scrollTo(name=='Left'?v:$(window)['scrollLeft'](),name=='Top'?v:$(window)['scrollTop']()):this['scroll'+name]=v;}):this[0]==window||this[0]==document?self[(name=='Left'?'pageXOffset':'pageYOffset')]||$.boxModel&&document.documentElement['scroll'+name]||document.body['scroll'+name]:this[0]['scroll'+name];};});var _remove=$.fn.remove;$.fn.extend({position:function(){var offset=this.offset();var offsetParent=this.offsetParent();var parentOffset=offsetParent.offset();return{top:offset.top-num(this[0],'marginTop')-parentOffset.top-num(offsetParent,'borderTopWidth'),left:offset.left-num(this[0],'marginLeft')-parentOffset.left-num(offsetParent,'borderLeftWidth')};},offsetParent:function(){var offsetParent=this[0].offsetParent;while(offsetParent&&(!/^body|html$/i.test(offsetParent.tagName)&&$.css(offsetParent,'position')=='static'))
offsetParent=offsetParent.offsetParent;return $(offsetParent);},mouseInteraction:function(o){return this.each(function(){new $.ui.mouseInteraction(this,o);});},removeMouseInteraction:function(o){return this.each(function(){if($.data(this,"ui-mouse"))
$.data(this,"ui-mouse").destroy();});},remove:function(){jQuery("*",this).add(this).trigger("remove");return _remove.apply(this,arguments);}});function num(el,prop){return parseInt($.curCSS(el.jquery?el[0]:el,prop,true))||0;};$.ui.mouseInteraction=function(element,options){var self=this;this.element=element;$.data(this.element,"ui-mouse",this);this.options=$.extend({},options);$(element).bind('mousedown.draggable',function(){return self.click.apply(self,arguments);});if($.browser.msie)$(element).attr('unselectable','on');$(element).mouseup(function(){if(self.timer)clearInterval(self.timer);});};$.extend($.ui.mouseInteraction.prototype,{destroy:function(){$(this.element).unbind('mousedown.draggable');},trigger:function(){return this.click.apply(this,arguments);},click:function(e){if(e.which!=1||$.inArray(e.target.nodeName.toLowerCase(),this.options.dragPrevention||[])!=-1||(this.options.condition&&!this.options.condition.apply(this.options.executor||this,[e,this.element])))return true;var self=this;var initialize=function(){self._MP={left:e.pageX,top:e.pageY};$(document).bind('mouseup.draggable',function(){return self.stop.apply(self,arguments);});$(document).bind('mousemove.draggable',function(){return self.drag.apply(self,arguments);});if(!self.initalized&&Math.abs(self._MP.left-e.pageX)>=self.options.distance||Math.abs(self._MP.top-e.pageY)>=self.options.distance){if(self.options.start)self.options.start.call(self.options.executor||self,e,self.element);if(self.options.drag)self.options.drag.call(self.options.executor||self,e,this.element);self.initialized=true;}};if(this.options.delay){if(this.timer)clearInterval(this.timer);this.timer=setTimeout(initialize,this.options.delay);}else{initialize();}
return false;},stop:function(e){var o=this.options;if(!this.initialized)return $(document).unbind('mouseup.draggable').unbind('mousemove.draggable');if(this.options.stop)this.options.stop.call(this.options.executor||this,e,this.element);$(document).unbind('mouseup.draggable').unbind('mousemove.draggable');this.initialized=false;return false;},drag:function(e){var o=this.options;if($.browser.msie&&!e.button)return this.stop.apply(this,[e]);if(!this.initialized&&(Math.abs(this._MP.left-e.pageX)>=o.distance||Math.abs(this._MP.top-e.pageY)>=o.distance)){if(this.options.start)this.options.start.call(this.options.executor||this,e,this.element);this.initialized=true;}else{if(!this.initialized)return false;}
if(o.drag)o.drag.call(this.options.executor||this,e,this.element);return false;}});})(jQuery);;(function($){$.fn.extend({draggable:function(options){var args=Array.prototype.slice.call(arguments,1);return this.each(function(){if(typeof options=="string"){var drag=$.data(this,"draggable");if(drag)drag[options].apply(drag,args);}else if(!$.data(this,"draggable"))
new $.ui.draggable(this,options);});}});$.ui.draggable=function(element,options){var self=this;this.element=$(element);$.data(element,"draggable",this);this.element.addClass("ui-draggable");this.options=$.extend({},options);var o=this.options;$.extend(o,{helper:o.ghosting==true?'clone':(o.helper||'original'),handle:o.handle?($(o.handle,element)[0]?$(o.handle,element):this.element):this.element,appendTo:o.appendTo||'parent'});$(element).bind("setData.draggable",function(event,key,value){self.options[key]=value;}).bind("getData.draggable",function(event,key){return self.options[key];});$(o.handle).mouseInteraction({executor:this,delay:o.delay,distance:o.distance||1,dragPrevention:o.cancel||o.cancel===''?o.cancel.toLowerCase().split(','):['input','textarea','button','select','option'],start:this.start,stop:this.stop,drag:this.drag,condition:function(e){return!(e.target.className.indexOf("ui-resizable-handle")!=-1||this.options.disabled);}});if(o.helper=='original'&&(this.element.css('position')=='static'||this.element.css('position')==''))
this.element.css('position','relative');if(o.cursorAt&&o.cursorAt.constructor==Array)
o.cursorAt={left:o.cursorAt[0],top:o.cursorAt[1]};};$.extend($.ui.draggable.prototype,{plugins:{},ui:function(e){return{helper:this.helper,position:this.position,absolutePosition:this.positionAbs,instance:this,options:this.options,element:this.element};},propagate:function(n,e){$.ui.plugin.call(this,n,[e,this.ui()]);return this.element.triggerHandler(n=="drag"?n:"drag"+n,[e,this.ui()],this.options[n]);},destroy:function(){if(!$.data(this.element[0],'draggable'))return;this.options.handle.removeMouseInteraction();this.element.removeClass("ui-draggable ui-draggable-disabled").removeData("draggable").unbind(".draggable");},enable:function(){this.element.removeClass("ui-draggable-disabled");this.options.disabled=false;},disable:function(){this.element.addClass("ui-draggable-disabled");this.options.disabled=true;},setContrains:function(minLeft,maxLeft,minTop,maxTop){this.minLeft=minLeft;this.maxLeft=maxLeft;this.minTop=minTop;this.maxTop=maxTop;this.constrainsSet=true;},checkConstrains:function(){if(!this.constrainsSet)return;if(this.position.left<this.minLeft)this.position.left=this.minLeft;if(this.position.left>this.maxLeft-this.helperProportions.width)this.position.left=this.maxLeft-this.helperProportions.width;if(this.position.top<this.minTop)this.position.top=this.minTop;if(this.position.top>this.maxTop-this.helperProportions.height)this.position.top=this.maxTop-this.helperProportions.height;},recallOffset:function(e){var elementPosition={left:this.elementOffset.left-this.offsetParentOffset.left,top:this.elementOffset.top-this.offsetParentOffset.top};var r=this.helper.css('position')=='relative';var o=this.options;this.originalPosition={left:(elementPosition.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft)),top:(elementPosition.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop))};this.offset={left:this._pageX-this.originalPosition.left,top:this._pageY-this.originalPosition.top};if(this.element[0]!=this.helper[0]){this.offset.left+=parseInt(this.element.css('marginLeft'),10)||0;this.offset.top+=parseInt(this.element.css('marginTop'),10)||0;}},start:function(e){var o=this.options;if($.ui.ddmanager)$.ui.ddmanager.current=this;this.helper=typeof o.helper=='function'?$(o.helper.apply(this.element[0],[e])):(o.helper=='clone'?this.element.clone().appendTo((o.appendTo=='parent'?this.element[0].parentNode:o.appendTo)):this.element);if(this.helper[0]!=this.element[0])this.helper.css('position','absolute');if(!this.helper.parents('body').length)this.helper.appendTo((o.appendTo=='parent'?this.element[0].parentNode:o.appendTo));this.offsetParent=(function(cp){while(cp){if(cp.style&&(/(absolute|relative|fixed)/).test($.css(cp,'position')))return $(cp);cp=cp.parentNode?cp.parentNode:null;};return $("body");})(this.helper[0].parentNode);this.elementOffset=this.element.offset();this.offsetParentOffset=this.offsetParent.offset();var elementPosition={left:this.elementOffset.left-this.offsetParentOffset.left,top:this.elementOffset.top-this.offsetParentOffset.top};this._pageX=e.pageX;this._pageY=e.pageY;this.clickOffset={left:e.pageX-this.elementOffset.left,top:e.pageY-this.elementOffset.top};var r=this.helper.css('position')=='relative';this.originalPosition={left:(r?parseInt(this.helper.css('left'),10)||0:elementPosition.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft)),top:(r?parseInt(this.helper.css('top'),10)||0:elementPosition.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop))};if(this.element.css('position')=='fixed'){this.originalPosition.top-=this.offsetParent[0]==document.body?$(document).scrollTop():this.offsetParent[0].scrollTop;this.originalPosition.left-=this.offsetParent[0]==document.body?$(document).scrollLeft():this.offsetParent[0].scrollLeft;}
this.offset={left:e.pageX-this.originalPosition.left,top:e.pageY-this.originalPosition.top};if(this.element[0]!=this.helper[0]){this.offset.left+=parseInt(this.element.css('marginLeft'),10)||0;this.offset.top+=parseInt(this.element.css('marginTop'),10)||0;}
this.propagate("start",e);this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,e);if(o.cursorAt){if(o.cursorAt.top!=undefined||o.cursorAt.bottom!=undefined){this.offset.top-=this.clickOffset.top-(o.cursorAt.top!=undefined?o.cursorAt.top:(this.helperProportions.height-o.cursorAt.bottom));this.clickOffset.top=(o.cursorAt.top!=undefined?o.cursorAt.top:(this.helperProportions.height-o.cursorAt.bottom));}
if(o.cursorAt.left!=undefined||o.cursorAt.right!=undefined){this.offset.left-=this.clickOffset.left-(o.cursorAt.left!=undefined?o.cursorAt.left:(this.helperProportions.width-o.cursorAt.right));this.clickOffset.left=(o.cursorAt.left!=undefined?o.cursorAt.left:(this.helperProportions.width-o.cursorAt.right));}}
return false;},clear:function(){if($.ui.ddmanager)$.ui.ddmanager.current=null;this.helper=null;},stop:function(e){if($.ui.ddmanager&&!this.options.dropBehaviour)
$.ui.ddmanager.drop(this,e);this.propagate("stop",e);if(this.cancelHelperRemoval)return false;if(this.options.helper!='original')this.helper.remove();this.clear();return false;},drag:function(e){this.position={top:e.pageY-this.offset.top,left:e.pageX-this.offset.left};this.positionAbs={left:e.pageX-this.clickOffset.left,top:e.pageY-this.clickOffset.top};this.checkConstrains();this.position=this.propagate("drag",e)||this.position;this.checkConstrains();$(this.helper).css({left:this.position.left+'px',top:this.position.top+'px'});if($.ui.ddmanager)$.ui.ddmanager.drag(this,e);return false;}});$.ui.plugin.add("draggable","cursor",{start:function(e,ui){var t=$('body');if(t.css("cursor"))ui.options._cursor=t.css("cursor");t.css("cursor",ui.options.cursor);},stop:function(e,ui){if(ui.options._cursor)$('body').css("cursor",ui.options._cursor);}});$.ui.plugin.add("draggable","zIndex",{start:function(e,ui){var t=$(ui.helper);if(t.css("zIndex"))ui.options._zIndex=t.css("zIndex");t.css('zIndex',ui.options.zIndex);},stop:function(e,ui){if(ui.options._zIndex)$(ui.helper).css('zIndex',ui.options._zIndex);}});$.ui.plugin.add("draggable","opacity",{start:function(e,ui){var t=$(ui.helper);if(t.css("opacity"))ui.options._opacity=t.css("opacity");t.css('opacity',ui.options.opacity);},stop:function(e,ui){if(ui.options._opacity)$(ui.helper).css('opacity',ui.options._opacity);}});$.ui.plugin.add("draggable","revert",{stop:function(e,ui){var self=ui.instance,helper=$(self.helper);self.cancelHelperRemoval=true;$(ui.helper).animate({left:self.originalPosition.left,top:self.originalPosition.top},parseInt(ui.options.revert,10)||500,function(){if(ui.options.helper!='original')helper.remove();if(!helper)self.clear();});}});$.ui.plugin.add("draggable","iframeFix",{start:function(e,ui){var o=ui.options;if(ui.instance.slowMode)return;if(o.iframeFix.constructor==Array){for(var i=0;i<o.iframeFix.length;i++){var co=$(o.iframeFix[i]).offset({border:false});$('<div class="DragDropIframeFix"" style="background: #fff;"></div>').css("width",$(o.iframeFix[i])[0].offsetWidth+"px").css("height",$(o.iframeFix[i])[0].offsetHeight+"px").css("position","absolute").css("opacity","0.001").css("z-index","1000").css("top",co.top+"px").css("left",co.left+"px").appendTo("body");}}else{$("iframe").each(function(){var co=$(this).offset({border:false});$('<div class="DragDropIframeFix" style="background: #fff;"></div>').css("width",this.offsetWidth+"px").css("height",this.offsetHeight+"px").css("position","absolute").css("opacity","0.001").css("z-index","1000").css("top",co.top+"px").css("left",co.left+"px").appendTo("body");});}},stop:function(e,ui){if(ui.options.iframeFix)$("div.DragDropIframeFix").each(function(){this.parentNode.removeChild(this);});}});$.ui.plugin.add("draggable","containment",{start:function(e,ui){var o=ui.options;var self=ui.instance;if((o.containment.left!=undefined||o.containment.constructor==Array)&&!o._containment)return;if(!o._containment)o._containment=o.containment;if(o._containment=='parent')o._containment=this[0].parentNode;if(o._containment=='document'){o.containment=[0,0,$(document).width(),($(document).height()||document.body.parentNode.scrollHeight)];}else{var ce=$(o._containment)[0];var co=$(o._containment).offset();o.containment=[co.left+parseInt($(ce).css("borderLeftWidth")),co.top+parseInt($(ce).css("borderTopWidth")),co.left+(ce.offsetWidth||ce.scrollWidth)-parseInt($(ce).css("borderRightWidth")),co.top+(ce.offsetHeight||ce.scrollHeight)-parseInt($(ce).css("borderBottomWidth"))];}
var c=o.containment;ui.instance.setContrains(c[0]-(self.offset.left-self.clickOffset.left),c[2]-(self.offset.left-self.clickOffset.left),c[1]-(self.offset.top-self.clickOffset.top),c[3]-(self.offset.top-self.clickOffset.top));}});$.ui.plugin.add("draggable","grid",{drag:function(e,ui){var o=ui.options;var newLeft=ui.instance.originalPosition.left+Math.round((e.pageX-ui.instance._pageX)/o.grid[0])*o.grid[0];var newTop=ui.instance.originalPosition.top+Math.round((e.pageY-ui.instance._pageY)/o.grid[1])*o.grid[1];ui.instance.position.left=newLeft;ui.instance.position.top=newTop;}});$.ui.plugin.add("draggable","axis",{drag:function(e,ui){var o=ui.options;if(o.constraint)o.axis=o.constraint;switch(o.axis){case'x':ui.instance.position.top=ui.instance.originalPosition.top;break;case'y':ui.instance.position.left=ui.instance.originalPosition.left;break;}}});$.ui.plugin.add("draggable","scroll",{start:function(e,ui){var o=ui.options;o.scrollSensitivity=o.scrollSensitivity||20;o.scrollSpeed=o.scrollSpeed||20;ui.instance.overflowY=function(el){do{if(/auto|scroll/.test(el.css('overflow'))||(/auto|scroll/).test(el.css('overflow-y')))return el;el=el.parent();}while(el[0].parentNode);return $(document);}(this);ui.instance.overflowX=function(el){do{if(/auto|scroll/.test(el.css('overflow'))||(/auto|scroll/).test(el.css('overflow-x')))return el;el=el.parent();}while(el[0].parentNode);return $(document);}(this);},drag:function(e,ui){var o=ui.options;var i=ui.instance;if(i.overflowY[0]!=document&&i.overflowY[0].tagName!='HTML'){if(i.overflowY[0].offsetHeight-(ui.position.top-i.overflowY[0].scrollTop+i.clickOffset.top)<o.scrollSensitivity)
i.overflowY[0].scrollTop=i.overflowY[0].scrollTop+o.scrollSpeed;if((ui.position.top-i.overflowY[0].scrollTop+i.clickOffset.top)<o.scrollSensitivity)
i.overflowY[0].scrollTop=i.overflowY[0].scrollTop-o.scrollSpeed;}else{if(e.pageY-$(document).scrollTop()<o.scrollSensitivity)
$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);if($(window).height()-(e.pageY-$(document).scrollTop())<o.scrollSensitivity)
$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}
if(i.overflowX[0]!=document&&i.overflowX[0].tagName!='HTML'){if(i.overflowX[0].offsetWidth-(ui.position.left-i.overflowX[0].scrollLeft+i.clickOffset.left)<o.scrollSensitivity)
i.overflowX[0].scrollLeft=i.overflowX[0].scrollLeft+o.scrollSpeed;if((ui.position.top-i.overflowX[0].scrollLeft+i.clickOffset.left)<o.scrollSensitivity)
i.overflowX[0].scrollLeft=i.overflowX[0].scrollLeft-o.scrollSpeed;}else{if(e.pageX-$(document).scrollLeft()<o.scrollSensitivity)
$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);if($(window).width()-(e.pageX-$(document).scrollLeft())<o.scrollSensitivity)
$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}
ui.instance.recallOffset(e);}});$.ui.plugin.add("draggable","snap",{start:function(e,ui){ui.instance.snapElements=[];$(ui.options.snap===true?'.ui-draggable':ui.options.snap).each(function(){var $t=$(this);var $o=$t.offset();if(this!=ui.instance.element[0])ui.instance.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});});},drag:function(e,ui){var d=ui.options.snapTolerance||20;var x1=ui.absolutePosition.left,x2=x1+ui.instance.helperProportions.width,y1=ui.absolutePosition.top,y2=y1+ui.instance.helperProportions.height;for(var i=ui.instance.snapElements.length-1;i>=0;i--){var l=ui.instance.snapElements[i].left,r=l+ui.instance.snapElements[i].width,t=ui.instance.snapElements[i].top,b=t+ui.instance.snapElements[i].height;if(!((l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d)||(l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d)||(l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d)||(l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d)))continue;if(ui.options.snapMode!='inner'){var ts=Math.abs(t-y2)<=20;var bs=Math.abs(b-y1)<=20;var ls=Math.abs(l-x2)<=20;var rs=Math.abs(r-x1)<=20;if(ts)ui.position.top=t-ui.instance.offset.top+ui.instance.clickOffset.top-ui.instance.helperProportions.height;if(bs)ui.position.top=b-ui.instance.offset.top+ui.instance.clickOffset.top;if(ls)ui.position.left=l-ui.instance.offset.left+ui.instance.clickOffset.left-ui.instance.helperProportions.width;if(rs)ui.position.left=r-ui.instance.offset.left+ui.instance.clickOffset.left;}
if(ui.options.snapMode!='outer'){var ts=Math.abs(t-y1)<=20;var bs=Math.abs(b-y2)<=20;var ls=Math.abs(l-x1)<=20;var rs=Math.abs(r-x2)<=20;if(ts)ui.position.top=t-ui.instance.offset.top+ui.instance.clickOffset.top;if(bs)ui.position.top=b-ui.instance.offset.top+ui.instance.clickOffset.top-ui.instance.helperProportions.height;if(ls)ui.position.left=l-ui.instance.offset.left+ui.instance.clickOffset.left;if(rs)ui.position.left=r-ui.instance.offset.left+ui.instance.clickOffset.left-ui.instance.helperProportions.width;}};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(e,ui){ui.instance.sortable=$.data($(ui.options.connectToSortable)[0],'sortable');ui.instance.sortableOffset=ui.instance.sortable.element.offset();ui.instance.sortableOuterWidth=ui.instance.sortable.element.outerWidth();ui.instance.sortableOuterHeight=ui.instance.sortable.element.outerHeight();if(ui.instance.sortable.options.revert)ui.instance.sortable.shouldRevert=true;},stop:function(e,ui){var inst=ui.instance.sortable;if(inst.isOver){inst.isOver=0;ui.instance.cancelHelperRemoval=true;inst.cancelHelperRemoval=false;if(inst.shouldRevert)inst.options.revert=true;inst.stop(e);inst.options.helper="original";}},drag:function(e,ui){var inst=ui.instance.sortable;ui.instance.position.absolute=ui.absolutePosition;if(inst.intersectsWith.call(ui.instance,{left:ui.instance.sortableOffset.left,top:ui.instance.sortableOffset.top,width:ui.instance.sortableOuterWidth,height:ui.instance.sortableOuterHeight})){if(!inst.isOver){inst.isOver=1;var height=inst.options.placeholderElement?$(inst.options.placeholderElement,$(inst.options.items,inst.element)).innerHeight():$(inst.options.items,inst.element).innerHeight();var width=inst.options.placeholderElement?$(inst.options.placeholderElement,$(inst.options.items,inst.element)).innerWidth():$(inst.options.items,inst.element).innerWidth();inst.currentItem=$(this).clone().appendTo(inst.element);inst.options.helper=function(){return ui.helper[0];};inst.start(e);inst.clickOffset.top=ui.instance.clickOffset.top;inst.clickOffset.left=ui.instance.clickOffset.left;inst.offset.left-=ui.absolutePosition.left-inst.position.absolute.left;inst.offset.top-=ui.absolutePosition.top-inst.position.absolute.top;inst.helperProportions={width:width,height:height};ui.helper.animate({height:height,width:width},500);ui.instance.propagate("toSortable",e);}
if(inst.currentItem)inst.drag(e);}else{if(inst.isOver){inst.isOver=0;inst.cancelHelperRemoval=true;inst.options.revert=false;inst.stop(e);inst.options.helper="original";inst.currentItem.remove();inst.placeholder.remove();ui.helper.animate({height:this.innerHeight(),width:this.innerWidth()},500);ui.instance.propagate("fromSortable",e);}};}});$.ui.plugin.add("draggable","stack",{start:function(e,ui){var group=$.makeArray($(ui.options.stack.group)).sort(function(a,b){return(parseInt($(a).css("zIndex"))||ui.options.stack.min)-(parseInt($(b).css("zIndex"))||ui.options.stack.min);});$(group).each(function(i){this.style.zIndex=ui.options.stack.min+i;});this[0].style.zIndex=ui.options.stack.min+group.length;}});})(jQuery);;(function($){$.fn.extend({droppable:function(options){var args=Array.prototype.slice.call(arguments,1);return this.each(function(){if(typeof options=="string"){var drop=$.data(this,"droppable");if(drop)drop[options].apply(drop,args);}else if(!$.data(this,"droppable"))
new $.ui.droppable(this,options);});}});$.ui.droppable=function(element,options){var instance=this;this.element=$(element);$.data(element,"droppable",this);this.element.addClass("ui-droppable");this.isover=0;this.isout=1;var o=this.options=options=$.extend({},$.ui.droppable.defaults,options);var accept=o.accept;o=$.extend(o,{accept:o.accept&&o.accept.constructor==Function?o.accept:function(d){return $(d).is(accept);}});$(element).bind("setData.droppable",function(event,key,value){o[key]=value;}).bind("getData.droppable",function(event,key){return o[key];}).bind('remove',function(){instance.destroy();});this.proportions={width:this.element.outerWidth(),height:this.element.outerHeight()};$.ui.ddmanager.droppables.push(this);};$.extend($.ui.droppable,{defaults:{disabled:false,tolerance:'intersect'}});$.extend($.ui.droppable.prototype,{plugins:{},ui:function(c){return{instance:this,draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,absolutePosition:c.positionAbs,options:this.options,element:this.element};},destroy:function(){var drop=$.ui.ddmanager.droppables;for(var i=0;i<drop.length;i++)
if(drop[i]==this)
drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");},enable:function(){this.element.removeClass("ui-droppable-disabled");this.options.disabled=false;},disable:function(){this.element.addClass("ui-droppable-disabled");this.options.disabled=true;},over:function(e){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;if(this.options.accept.call(this.element,(draggable.currentItem||draggable.element))){$.ui.plugin.call(this,'over',[e,this.ui(draggable)]);this.element.triggerHandler("dropover",[e,this.ui(draggable)],this.options.over);}},out:function(e){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;if(this.options.accept.call(this.element,(draggable.currentItem||draggable.element))){$.ui.plugin.call(this,'out',[e,this.ui(draggable)]);this.element.triggerHandler("dropout",[e,this.ui(draggable)],this.options.out);}},drop:function(e,custom){var draggable=custom||$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;var childrenIntersection=false;this.element.find(".ui-droppable").each(function(){var inst=$.data(this,'droppable');if(inst.options.greedy&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)){childrenIntersection=true;return false;}});if(childrenIntersection)return;if(this.options.accept.call(this.element,(draggable.currentItem||draggable.element))){$.ui.plugin.call(this,'drop',[e,this.ui(draggable)]);this.element.triggerHandler("drop",[e,this.ui(draggable)],this.options.drop);}},activate:function(e){var draggable=$.ui.ddmanager.current;$.ui.plugin.call(this,'activate',[e,this.ui(draggable)]);if(draggable)this.element.triggerHandler("dropactivate",[e,this.ui(draggable)],this.options.activate);},deactivate:function(e){var draggable=$.ui.ddmanager.current;$.ui.plugin.call(this,'deactivate',[e,this.ui(draggable)]);if(draggable)this.element.triggerHandler("dropdeactivate",[e,this.ui(draggable)],this.options.deactivate);}});$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return false;var x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height;var l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case'fit':if(!((y2-(draggable.helperProportions.height/2)>t&&y1<t)||(y1<b&&y2>b)||(x2>l&&x1<l)||(x1<r&&x2>r)))return false;if(y2-(draggable.helperProportions.height/2)>t&&y1<t)return 1;if(y1<b&&y2>b)return 2;if(x2>l&&x1<l)return 1;if(x1<r&&x2>r)return 2;break;case'intersect':return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);break;case'pointer':return(l<((draggable.positionAbs||draggable.position.absolute).left+draggable.clickOffset.left)&&((draggable.positionAbs||draggable.position.absolute).left+draggable.clickOffset.left)<r&&t<((draggable.positionAbs||draggable.position.absolute).top+draggable.clickOffset.top)&&((draggable.positionAbs||draggable.position.absolute).top+draggable.clickOffset.top)<b);break;case'touch':return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));break;default:return false;break;}};$.ui.ddmanager={current:null,droppables:[],prepareOffsets:function(t,e){var m=$.ui.ddmanager.droppables;var type=e?e.type:null;for(var i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].options.accept.call(m[i].element,(t.currentItem||t.element))))continue;m[i].visible=m[i].element.is(":visible");if(!m[i].visible)continue;m[i].offset=m[i].element.offset();m[i].proportions={width:m[i].element.outerWidth(),height:m[i].element.outerHeight()};if(type=="dragstart")m[i].activate.call(m[i],e);}},drop:function(draggable,e){$.each($.ui.ddmanager.droppables,function(){if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance))
this.drop.call(this,e);if(!this.options.disabled&&this.visible&&this.options.accept.call(this.element,(draggable.currentItem||draggable.element))){this.isout=1;this.isover=0;this.deactivate.call(this,e);}});},drag:function(draggable,e){if(draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,e);$.each($.ui.ddmanager.droppables,function(){if(this.disabled||this.greedyChild||!this.visible)return;var intersects=$.ui.intersect(draggable,this,this.options.tolerance);var c=!intersects&&this.isover==1?'isout':(intersects&&this.isover==0?'isover':null);if(!c)return;var parentInstance;if(this.options.greedy){var parent=this.element.parents('.ui-droppable:eq(0)');if(parent.length){parentInstance=$.data(parent[0],'droppable');parentInstance.greedyChild=(c=='isover'?1:0);}}
if(parentInstance&&c=='isover'){parentInstance['isover']=0;parentInstance['isout']=1;parentInstance.out.call(parentInstance,e);}
this[c]=1;this[c=='isout'?'isover':'isout']=0;this[c=="isover"?"over":"out"].call(this,e);if(parentInstance&&c=='isout'){parentInstance['isout']=0;parentInstance['isover']=1;parentInstance.over.call(parentInstance,e);}});}};$.ui.plugin.add("droppable","activeClass",{activate:function(e,ui){$(this).addClass(ui.options.activeClass);},deactivate:function(e,ui){$(this).removeClass(ui.options.activeClass);},drop:function(e,ui){$(this).removeClass(ui.options.activeClass);}});$.ui.plugin.add("droppable","hoverClass",{over:function(e,ui){$(this).addClass(ui.options.hoverClass);},out:function(e,ui){$(this).removeClass(ui.options.hoverClass);},drop:function(e,ui){$(this).removeClass(ui.options.hoverClass);}});})(jQuery);(function($){$.fn.lazyload=function(options){var settings={threshold:0,failurelimit:0,event:"scroll",effect:"show"};if(options){$.extend(settings,options);}
var elements=this;if("scroll"==settings.event){$(window).bind("scroll",function(event){var counter=0;elements.each(function(){if(!$.belowthefold(this,settings)&&!$.rightoffold(this,settings)){$(this).trigger("appear");}else{if(counter++>settings.failurelimit){return false;}}});var temp=$.grep(elements,function(element){return!element.loaded;});elements=$(temp);});}
return this.each(function(){var self=this;$(self).attr("original",$(self).attr("src")).attr("originalalt",$(self).attr("alt"));if("scroll"!=settings.event||$.belowthefold(self,settings)||$.rightoffold(self,settings)){if(settings.placeholder){$(self).attr("src",settings.placeholder);}else{$(self).removeAttr("src").removeAttr("alt");}
self.loaded=false;}else{self.loaded=true;}
$(self).one("appear",function(){if(!this.loaded){$("<img />").attr("src",$(self).attr("original")).attr("alt",$(self).attr("originalalt")).bind("load",function(){$(self).hide().attr("src",$(self).attr("original")).attr("alt",$(self).attr("originalalt"))
[settings.effect](settings.effectspeed);self.loaded=true;});};});if("scroll"!=settings.event){$(self).bind(settings.event,function(event){if(!self.loaded){$(self).trigger("appear");}});}});};$.belowthefold=function(element,settings){var fold=$(window).height()+$(window).scrollTop();return fold<=$(element).offset().top-settings.threshold;};$.rightoffold=function(element,settings){var fold=$(window).width()+$(window).scrollLeft();return fold<=$(element).offset().left-settings.threshold;};$.extend($.expr[':'],{"below-the-fold":"$.belowthefold(a, {threshold : 0})","above-the-fold":"!$.belowthefold(a, {threshold : 0})","right-of-fold":"$.rightoffold(a, {threshold : 0})","left-of-fold":"!$.rightoffold(a, {threshold : 0})"});})(jQuery);(function($){$.fn.jqm=function(o){var p={overlay:50,overlayClass:'jqmOverlay',closeClass:'jqmClose',trigger:'.jqModal',ajax:F,ajaxText:'',target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){if(this._jqm)return H[this._jqm].c=$.extend({},H[this._jqm].c,o);s++;this._jqm=s;H[s]={c:$.extend(p,$.jqm.params,o),a:F,w:$(this).addClass('jqmID'+s),s:s};if(p.trigger)$(this).jqmAddTrigger(p.trigger);});};$.fn.jqmAddClose=function(e){return hs(this,e,'jqmHide');};$.fn.jqmAddTrigger=function(e){return hs(this,e,'jqmShow');};$.fn.jqmShow=function(t){return this.each(function(){$.jqm.open(this._jqm,t);});};$.fn.jqmHide=function(t){return this.each(function(){$.jqm.close(this._jqm,t)});};$.jqm={hash:{},open:function(s,t){var h=H[s],c=h.c,cc='.'+c.closeClass,z=(parseInt(h.w.css('z-index'))),z=(z>0)?z:3000,o=$('<div></div>').css({height:'100%',width:'100%',position:'fixed',left:0,top:0,'z-index':z-1,opacity:c.overlay/100});if(h.a)return F;h.t=t;h.a=true;h.w.css('z-index',z);if(c.modal){if(!A[0])L('bind');A.push(s);}
else if(c.overlay>0)h.w.jqmAddClose(o);else o=F;h.o=(o)?o.addClass(c.overlayClass).prependTo('body'):F;if(ie6){$('html,body').css({height:'100%',width:'100%'});if(o){o=o.css({position:'absolute'})[0];for(var y in{Top:1,Left:1})o.style.setExpression(y.toLowerCase(),"(_=(document.documentElement.scroll"+y+" || document.body.scroll"+y+"))+'px'");}}
if(c.ajax){var r=c.target||h.w,u=c.ajax,r=(typeof r=='string')?$(r,h.w):$(r),u=(u.substr(0,1)=='@')?$(t).attr(u.substring(1)):u;r.html(c.ajaxText).load(u,function(){if(c.onLoad)c.onLoad.call(this,h);if(cc)h.w.jqmAddClose($(cc,h.w));e(h);});}
else if(cc)h.w.jqmAddClose($(cc,h.w));if(c.toTop&&h.o)h.w.before('<span id="jqmP'+h.w[0]._jqm+'"></span>').insertAfter(h.o);(c.onShow)?c.onShow(h):h.w.show();e(h);return F;},close:function(s){var h=H[s];if(!h.a)return F;h.a=F;if(A[0]){A.pop();if(!A[0])L('unbind');}
if(h.c.toTop&&h.o)$('#jqmP'+h.w[0]._jqm).after(h.w).remove();if(h.c.onHide)h.c.onHide(h);else{h.w.hide();if(h.o)h.o.remove();}return F;},params:{}};var s=0,H=$.jqm.hash,A=[],ie6=$.browser.msie&&($.browser.version=="6.0"),F=false,i=$('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),e=function(h){if(ie6)if(h.o)h.o.html('<p style="width:100%;height:100%"/>').prepend(i);else if(!$('iframe.jqm',h.w)[0])h.w.prepend(i);f(h);},f=function(h){try{$(':input:visible',h.w)[0].focus();}catch(_){}},L=function(t){$()[t]("keypress",m)[t]("keydown",m)[t]("mousedown",m);},m=function(e){var h=H[A[A.length-1]],r=(!$(e.target).parents('.jqmID'+h.s)[0]);if(r)f(h);return!r;},hs=function(w,t,c){return w.each(function(){var s=this._jqm;$(t).each(function(){if(!this[c]){this[c]=[];$(this).click(function(){for(var i in{jqmShow:1,jqmHide:1})for(var s in this[i])if(H[this[i][s]])H[this[i][s]].w[i](this);return F;});}this[c].push(s);});});};})(jQuery);var Modals={ModalBG:false,CurrentWindow:false,CurrentWidth:0,CurrentHeight:0,Confirm:function(question,action){Modals.Question(question,[{Text:'Ναι',Action:action},{Text:'Όχι'}]);},Question:function(question,answers){qq=document.createElement('div');qq.appendChild(document.createElement('br'));qq.appendChild(document.createTextNode(question));options=document.createElement('ul');options.style.display='inline';options.style.margin='0px';options.style.padding='0px';for(i in answers){answer=answers[i];li=document.createElement('li');li.style.display='inline';li.style.padding='5px';btn=document.createElement('input');btn.type='button';btn.value=answer.Text;btn.onclick=function(act){return function(){if(act){act();}
Modals.Destroy();};}(answer.Action);li.appendChild(btn);options.appendChild(li);}
qq.appendChild(document.createElement('br'));qq.appendChild(document.createElement('br'));qq.appendChild(options);Modals.Create(qq,250,100);},Create:function(node,width,height){if(!width){width=500;}
if(!height){height=300;}
Modals.ModalBG=bg=document.createElement('div');bg.className='modalbg';Modals.CurrentWindow=modal=document.createElement('div');modal.className='modal';modal.appendChild(node);modal.style.width=width+'px';modal.style.height=height+'px';document.body.appendChild(bg);document.body.appendChild(modal);document.body.onscroll=Modals.Scrolled;Modals.CurrentWidth=width;Modals.CurrentHeight=height;Modals.Scrolled();},Destroy:function(){document.body.removeChild(Modals.CurrentWindow);document.body.removeChild(Modals.ModalBG);},Scrolled:function(){Modals.ModalBG.style.top=document.body.scrollTop+'px';Modals.ModalBG.style.left=document.body.scrollLeft+'px';Modals.CurrentWindow.style.marginLeft=document.body.scrollLeft-Modals.CurrentWidth/2+'px';Modals.CurrentWindow.style.marginTop=document.body.scrollTop-Modals.CurrentHeight/2+'px';}};var Dates={LeapYear:function(year){if(year%100){if(year%400){return true;}}
else if(year%4){return true;}
return false;},DaysInMonth:function(month,year){switch(month){case'01':case'03':case'05':case'07':case'08':case'10':case'12':return 31;case'02':if(Dates.LeapYear(year)){return 29;}
return 28;}
return 30;},ValidDate:function(day,month,year){var daysinmonth=Dates.DaysInMonth(month,year);if(day<0||day>daysinmonth){return false;}
if(month<0||month>12){return false;}
return true;}};var Coala={StoredObjects:[],ThreadedRequests:[],LazyCommit:null,BaseURL:'https://beta.zino.gr/phoenix/js',Frozen:function(unitid,parameters,failurecallback){if(Coala.ThreadedRequests.length){Coala.Commit();}
this._AppendRequest(unitid,parameters,'frozen',failurecallback);Coala.Commit();},Cold:function(unitid,parameters,failurecallback){this._AppendRequest(unitid,parameters,'cold',failurecallback);clearTimeout(this.LazyCommit);this.LazyCommit=setTimeout(function(){Coala.Commit();},50);},Warm:function(unitid,parameters,failurecallback){this._AppendRequest(unitid,parameters,'warm',failurecallback);clearTimeout(this.LazyCommit);this.LazyCommit=setTimeout(function(){Coala.Commit();},50);},_AppendRequest:function(unitid,parameters,type,failurecallback){if(typeof unitid==='undefined'){alert('No coala call unitid specified; aborting call');return;}
if(typeof parameters==='undefined'){alert('No coala call parameters specified; aborting call');return;}
Coala.ThreadedRequests.push({'unitid':unitid,'parameters':parameters,'type':type,'failurecallback':failurecallback});},Commit:function(){if(Coala.ThreadedRequests.length===0){return;}
request={'ids':''};ids=[];warm=false;failurecallbacks=[];for(i in Coala.ThreadedRequests){args=[];if(typeof Coala.ThreadedRequests[i].failurecallback!=='undefined'){failurecallbacks.push(Coala.ThreadedRequests[i].failurecallback);}
for(j in Coala.ThreadedRequests[i].parameters){switch(typeof(Coala.ThreadedRequests[i].parameters[j])){case'object':case'function':Coala.StoredObjects[Coala.StoredObjects.length]=Coala.ThreadedRequests[i].parameters[j];arg='Coala.StoredObjects['+(Coala.StoredObjects.length-1)+']';break;case'boolean':if(Coala.ThreadedRequests[i].parameters[j]){arg=1;}
else{arg=0;}
break;default:arg=Coala.ThreadedRequests[i].parameters[j];break;}
args.push(encodeURIComponent(j)+'='+encodeURIComponent(arg));}
request['p'+i]=args.join('&');switch(Coala.ThreadedRequests[i].type){case'warm':symbol='!';warm=true;break;case'cold':symbol='~';break;case'frozen':symbol='_';break;default:alert('Invalid coala call type');}
ids.push(symbol+Coala.ThreadedRequests[i].unitid);}
if(warm){method='post';}
else{method='get';}
request.ids=ids.join(':');this._PlaceRequest(request,method,failurecallbacks);Coala.ThreadedRequests=[];},_PlaceRequest:function(request,method,failurecallbacks){if(request===null){request={};}
Socket=new this._AJAXSocket();if(Socket===null){return false;}
realparameters=[];for(parameter in request){realparameters.push(encodeURIComponent(parameter)+'='+encodeURIComponent(request[parameter]));}
Socket.connect(this.BaseURL+"coala.php",method,realparameters.join('&'),function(xh){Coala._Callback(xh,failurecallbacks);});return true;},_Callback:function(xh,failurecallbacks){if(xh.readyState!=4){for(i=0;i<failurecallbacks.length;++i){failurecallbacks[i](0);}
return;}
try{if(typeof xh.status!=='undefined'&&xh.status!==0){httpStatus=xh.status;}
else{httpStatus=13030;}}
catch(e){httpStatus=13030;}
if(httpStatus<200||httpStatus>300&&httpStatus!==1223){for(i=0;i<failurecallbacks.length;++i){failurecallbacks[i](httpStatus);}
return;}
if(typeof water_debug_data!=='undefined'){old_water_debug_data=water_debug_data;}
else{old_water_debug_data={};}
resp=xh.responseText;if(resp.substr(0,'while(1);'.length)!='while(1);'){alert('Invalid Coala initization string: \n'+resp);return;}
resp=resp.substr('while(1);'.length);eval(resp);if(typeof water_debug_data!=='undefined'){coala_water_debug_data=water_debug_data;water_debug_data=old_water_debug_data;}},_AJAXSocket:function(){var xh;var bComplete=false;this.connect=function(sURL,sMethod,sVars,fnDone){if(!xh){return false;}
bComplete=false;sMethod=sMethod.toUpperCase();try{if(sMethod=="GET"){xh.open(sMethod,sURL+"?"+sVars,true);sVars="";}
else{xh.open(sMethod,sURL,true);xh.setRequestHeader("Method","POST "+sURL+" HTTP/1.1");xh.setRequestHeader("Content-Type","application/x-www-form-urlencoded");}
xh.onreadystatechange=function(){if(!bComplete&&xh.readyState==4){bComplete=true;fnDone(xh);}};xh.send(sVars);}
catch(z){alert('Something went wrong during a Coala request: '+z);return false;}
return true;};try{xh=new ActiveXObject("Msxml2.XMLHTTP");}
catch(e1){try{xh=new ActiveXObject("Microsoft.XMLHTTP");}
catch(e2){try{xh=new XMLHttpRequest();}
catch(e3){xh=false;}}}
if(!xh){alert('Failed to create XMLHTTP object; check your browser?');return null;}
return this;}};var Places={onedit:false,showLinks:function(id){if(!Places.onedit){g('peditlink_'+id).style.display='inline';g('pdeletelink_'+id).style.display='inline';}},hideLinks:function(id){g('peditlink_'+id).style.display='none';g('pdeletelink_'+id).style.display='none';},deletep:function(id){if(confirm('Θέλεις σίγουρα να διαγράψεις τη συγκεκριμένη τοποθεσία;')){var element=g('place_'+id);while(element.firstChild){element.removeChild(element.firstChild);}
element.appendChild(d.createElement('Διαγραφή...'));Coala.Warm('place/delete',{'placeid':id});}},edit:function(id){if(Places.onedit){return;}
var place=g('praw_'+id).innerHTML;var pform=d.createElement('form');pform.id='editpform';pform.name='editp';pform.action='do/place/new';pform.method='post';var pid=d.createElement('input');pid.type='hidden';pid.name='eid';pid.value=id;var pinput=d.createElement('input');pinput.size='100';pinput.type='text';pinput.name='name';pinput.value=place;pinput.className='bigtext';var psubmit=d.createElement('input');psubmit.type='submit';psubmit.value='Επεξεργασία';var pcancel=d.createElement('input');pcancel.type='button';pcancel.value='Ακύρωση';pcancel.onclick=(function(id){return function(){Places.cancelEdit(id);};})(id);pform.appendChild(pid);pform.appendChild(pinput);pform.appendChild(d.createTextNode(' '));pform.appendChild(psubmit);pform.appendChild(d.createTextNode(' '));pform.appendChild(pcancel);pform.appendChild(d.createElement('br'));g('place_'+id).style.display='none';g('place_'+id).parentNode.insertBefore(pform,g('place_'+id).nextSibling);Places.onedit=true;},cancelEdit:function(id){g('place_'+id).parentNode.removeChild(g('editpform'));g('place_'+id).style.display='';Places.onedit=false;},create:function(){g('newp').style.display='none';g('newpform').style.display='block';},cancelCreate:function(){g('newp').style.display='';g('newpform').style.display='none';}};var AlbumList={Create:function(){var newalbum=document.createElement('li');$(newalbum).append($('div.createalbum').clone()).css("display","none");$('ul.albums')[0].insertBefore(newalbum,$('li.create')[0]);$('span.desc input').keydown(function(event){if(event.keyCode==13){AlbumList.renameFunc(this,newalbum);}}).blur(function(){AlbumList.renameFunc(this,newalbum);});setTimeout(function(){$(newalbum).show(400,function(){$('span.desc input')[0].focus();});},50);var link=document.createElement("a");$(link).attr({href:""}).addClass("new").append(document.createTextNode("«Ακύρωση")).click(function(){$(newalbum).hide(400,function(){$(newalbum).remove();});AlbumList.Cancel(newalbum);return false;});$('li.create').empty().append(link);},Cancel:function(albumnode){var link=document.createElement("a");var createimg=document.createElement("img");$(createimg).attr({src:ExcaliburSettings.imagesurl+"add3.png",alt:"Δημιουργία album",title:"Δημιουργία album"});$(link).attr({href:""}).addClass("new").append(createimg).append(document.createTextNode("Δημιουργία album")).click(function(){AlbumList.Create();return false;});$('li.create').empty().append(link);},renameFunc:function(elem,newalbum){var albumname=$('span.desc input')[0].value;if(albumname!==''){var spandesc=document.createElement('span');$(spandesc).append(document.createTextNode(albumname)).addClass("desc");$(elem).parent().parent().find("a").append(spandesc);$(elem).parent().remove();document.body.style.cursor='wait';Coala.Warm('album/create',{albumname:albumname,albumnode:newalbum});}}};$(function(){$('ul.albums li.create a.new').click(function(){AlbumList.Create();return false;});});var PhotoList={renaming:false,Delete:function(albumid){$('div#photolist div.owner div.delete a').css('background-image','url( "'+ExcaliburSettings.imagesurl+'delete.gif" )');if(confirm('Θέλεις σίγουρα να διαγράψεις το album;')){document.body.style.cursor='wait';Coala.Warm('album/delete',{albumid:albumid});}
$('div#photolist div.owner div.delete a').css('background-image','url( "'+ExcaliburSettings.imagesurl+'delete2.gif" )');return false;},Rename:function(albumid){if(!PhotoList.renaming){PhotoList.renaming=true;var inputbox=document.createElement('input');var albumname=$('div#photolist h2').html();$(inputbox).attr({'type':'text'}).css('width','200px').keydown(function(event){if(event.keyCode==13){PhotoList.renameFunc(this,albumid,albumname);}}).blur(function(){PhotoList.renameFunc(this,albumid,albumname);});$(inputbox)[0].value=albumname;$('div#photolist h2').empty().append(inputbox);}
$('div#photolist h2 input')[0].select();return false;},UploadPhoto:function(){$('form#uploadform')[0].submit();$('form#uploadform').hide();$('div#uploadingwait').show();},AddPhoto:function(imageinfo,x100){imageid=imageinfo.id;var li=document.createElement('li');$(li).css('display','none');$('div#photolist ul').prepend(li);Coala.Warm('album/photo/upload',{imageid:imageid,node:li,x100:x100});if(imageinfo.imagesnum==1){var dt=document.createElement('dt');$(dt).addClass('photonum');$('div#photolist dl').prepend(dt);}
if(x100){Modals.Destroy();}
PhotoList.UpdatePhotoNum(imageinfo.imagesnum);},UpdatePhotoNum:function(photonum){if(photonum===0){$('div#photolist dl dt.photonum').remove();}
else{var text=document.createTextNode(photonum);$('div#photolist dl dt.photonum').empty().append(text);}},renameFunc:function(elem,albumid,albumname){var name=elem.value;if(albumname!=name&&name!==''){window.document.title=name+' | '+ExcaliburSettings.applicationname;Coala.Warm('album/rename',{albumid:albumid,albumname:name});}
if(name!==''){$('div#photolist h2').empty().append(document.createTextNode(name));}
PhotoList.renaming=false;}};var PhotoView={renaming:false,Rename:function(photoid,albumname){if(!PhotoView.renaming){PhotoView.renaming=true;var inputbox=document.createElement('input');var photoname=$('div#pview h2').text();$(inputbox).attr({'type':'text'}).css('width','200px').keydown(function(event){if(event.keyCode==13){PhotoView.renameFunc(this,photoid,photoname,albumname);}}).blur(function(){PhotoView.renameFunc(this,photoid,photoname,albumname);});$(inputbox)[0].value=photoname;$('div#pview h2').empty().append(inputbox);}
$('div#pview h2 input')[0].select();return false;},Delete:function(photoid){if(confirm("Θέλεις σίγουρα να διαγράψεις την φωτογραφία;")){Coala.Warm('album/photo/delete',{photoid:photoid});}
return false;},MainImage:function(photoid){Coala.Warm('album/photo/mainimage',{photoid:photoid});$('div#pview div.owner div.mainimage').fadeOut(200,function(){$(this).empty().append(document.createTextNode('Ορίστηκε ως προεπιλεγμένη')).fadeIn(400);});return false;},AddFav:function(photoid,linknode){if($(linknode).find('span').hasClass('s_addfav')){$(linknode).fadeOut(800,function(){$(linknode).attr({href:'',title:'Αγαπημένο'}).removeClass('s_addfav').addClass('s_isaddedfav').empty().fadeIn(800);});Coala.Warm('favourites/add',{itemid:photoid,typeid:Types.Image});}
return false;},renameFunc:function(elem,photoid,photoname,albumname){var name=elem.value;if(photoname!=name){Coala.Warm('album/photo/rename',{photoid:photoid,photoname:name});var span=document.createElement('span');$(span).addClass('s_edit').css('paddingLeft','19px');if(name===''){window.document.title=albumname+' | '+ExcaliburSettings.applicationname;$('div.owner div.edit a').empty().append(span).append(document.createTextNode('Όρισε όνομα'));}
else{window.document.title=name+' | '+ExcaliburSettings.applicationname;$('div.owner div.edit a').empty().append(span).append(document.createTextNode('Μετονομασία'));}}
$('div#pview h2').empty().append(document.createTextNode(name));PhotoView.renaming=false;}};var Tag={photoid:false,friends:[],genders:[],already_tagged:[],clicked:false,resized:false,run:false,start:function(kollitaria,keyword,aux){if(kollitaria===false){kollitaria=Tag.friends;}
var ul=$('div.thephoto div.frienders ul').find('li').remove().end().get(0);for(var i=0;i<kollitaria.length;++i){if(kollitaria[i]===''){continue;}
var li=document.createElement('li');li.style.cursor="pointer";if($.inArray(kollitaria[i],Tag.already_tagged)!=-1){li.style.display="none";}
var div=document.createElement('div');div.onmousedown=(function(username){return function(event){Tag.submitTag(event,username,this);return false;};})(kollitaria[i]);var span=document.createElement('span');span.appendChild(document.createTextNode(kollitaria[i].substr(0,keyword.length)));div.appendChild(span);div.appendChild(document.createTextNode(kollitaria[i].substr(keyword.length)));li.appendChild(div);ul.appendChild(li);}
$('dd.addtag').hide();$('div.thephoto > div:not(.tanga)').show();if(aux===true){$('html, body').animate({scrollTop:($('div.thephoto').offset().top-20)},700);}
$('div.thephoto div.frienders form input').focus();Tag.run=true;},submitTag:function(event,username,node){var left=parseInt($('div.tagme').css('left'),10);var top=parseInt($('div.tagme').css('top'),10);var width=parseInt($('div.tagme').css('width'),10);var height=parseInt($('div.tagme').css('height'),10);var ind=$.inArray(username,Tag.friends);if(ind===-1){alert("Δεν μπορείται να σημάνεται τον συγκεκριμένο χρήστη");return;}
var gender=(Tag.genders[ind]=='f')?"η ":"ο ";$(node).parent().hide();$('div.thephoto div.frienders form input').val('');Tag.already_tagged.push(username);var div=document.createElement('div');div.appendChild(document.createTextNode(gender));var a=document.createElement('a');a.title=username;a.style.cursor="pointer";a.onmouseover=(function(username){return function(event){var nod=$("div.thephoto div.tanga div:contains('"+username+"')");Tag.showhideTag(nod,true,event);if(!Tag.run){nod.find('div').css('borderWidth','0px').show().end();}};})(username);a.onmouseout=(function(username){return function(){var nod=$("div.thephoto div.tanga div:contains('"+username+"')");Tag.showhideTag(nod,false);if(!Tag.run){nod.find('div').hide().end();}};})(username);a.appendChild(document.createTextNode(username));div.appendChild(a);if($('div.image_tags').children().length!==0){var las=$('div.image_tags div:last').get(0);las.appendChild(document.createTextNode(' και '));if($(las).prevAll().length!==0){las=$(las).prev().get(0);las.removeChild(las.lastChild);las.appendChild(document.createTextNode(', '));}}
$('div.image_tags').get(0).appendChild(div);var divani=document.createElement('div');divani.className="tag";divani.style.left=left+'px';divani.style.top=top+'px';divani.style.width=width+'px';divani.style.height=height+'px';var divani2=document.createElement('div');divani2.appendChild(document.createTextNode(username));divani.appendChild(divani2);$('div.tanga').get(0).appendChild(divani);$('div.image_tags').show();Coala.Warm('album/photo/tag/new',{'photoid':Tag.photoid,'username':username,'left':left,'top':top,'width':width,'height':height,'callback':Tag.newCallback});Tag.close();return false;},focus:function(event){if(!Tag.run){return;}
var x=event.offsetX?(event.offsetX):event.pageX-$("div.thephoto").get(0).offsetLeft;var y=event.offsetY?(event.offsetY):event.pageY-$("div.thephoto").get(0).offsetTop;var tag_width=parseInt($('div.tagme').css('width'),10);var tag_height=parseInt($('div.tagme').css('height'),10);var border_width=3*2;var image_width=parseInt($('div.thephoto').css('width'),10);var image_height=parseInt($('div.thephoto').css('height'),10);x-=tag_width/2;y-=tag_height/2;if(x<0){x=0;}
if(x+tag_width+border_width>image_width){x=image_width-tag_width-border_width;}
if(y<0){y=0;}
if(y+tag_height+border_width>image_height){y=image_height-tag_height-border_width;}
$('div.tagme').css({left:x+'px',top:y+'px'});$('div.thephoto div.frienders').css({left:(x+tag_width)+'px',top:y+'px'});},drag:function(event){if(!Tag.run){var x=event.offsetX?(event.offsetX):event.pageX-$("div.thephoto").get(0).offsetLeft;var y=event.offsetY?(event.offsetY):event.pageY-$("div.thephoto").get(0).offsetTop;$('div.tanga div').each(function(i){var left=parseInt($(this).css('left'),10);var top=parseInt($(this).css('top'),10);var width=parseInt($(this).css('width'),10);var height=parseInt($(this).css('height'),10);if(x>left&&x<left+width&&y>top&&y<top+height){$(this).css({"borderWidth":"2px","cursor":"pointer"}).find('div').show();}
else{$(this).css({"borderWidth":"0px","cursor":"default"}).find('div').hide();}});return;}
if(Tag.resized){$('div.thephoto div.frienders').hide();Tag.resize_do(event);}
else if(Tag.clicked){$('div.thephoto div.frienders').hide();Tag.focus(event);}},ekso:function(event,stop){if($.browser.msie){event.cancelBubble=true;}
else{event.stopPropagation();}
if(stop!==true){Tag.clicked=false;}},focusInput:function(event){$('div.thephoto div.frienders form input').focus();Tag.ekso(event);},showSug:function(event){if(!Tag.run){return;}
Tag.clicked=false;Tag.resized=false;$('div.thephoto div.frienders').show();$('div.thephoto div.frienders form input').focus();},katoPontike:function(event){if(!Tag.run){return;}
Tag.clicked=true;Tag.focus(event);},filterSug:function(event){var text=$('div.thephoto div.frienders form input').val();if(event.keyCode===27){Tag.close();return;}
if(event.keyCode===13){var index,found;found=false;for(index=0;index<Tag.friends.length;++index){if(text.toUpperCase()==Tag.friends[index].toUpperCase()){found=true;break;}}
if(!found){return;}
Tag.submitTag(event,Tag.friends[index],$("div.thephoto div.frienders ul li:contains('"+Tag.friends[index]+"') a").get(0));return;}
var friends=$.grep(Tag.friends,function(item,index){return(item.toUpperCase().substr(0,text.length)==text.toUpperCase());});Tag.start(friends,text);},close:function(){$('div.thephoto div.frienders form input').val('');$('dd.addtag').show();$('div.thephoto div.frienders, div.thephoto div.tagme').hide();Tag.run=false;return false;},del:function(id,username){var index=$.inArray(username,Tag.already_tagged);if(index===-1){return;}
$("div.thephoto div.tanga div:contains('"+username+"')").remove();var count=Tag.already_tagged.length;for(var i=0;i<Tag.already_tagged.length;++i){if(Tag.already_tagged[i]===''){--count;}}
Tag.already_tagged[index]='';--count;if(count===0){$('div.image_tags').hide();}
Coala.Warm('album/photo/tag/delete',{'id':id});},newCallback:function(id,username,subdomain){var a=document.createElement('a');a.title="Διαγραφή";a.onclick=function(){Tag.del(id,username);return false;};a.style.cursor="pointer";a.className="tag_del";$(a).click(function(){Tag.parseDel($(this).parent());});a.appendChild(document.createTextNode(" "));$('div.image_tags div:last').get(0).appendChild(a);$('div.thephoto div.tanga div.tag:last').click(function(){document.location.href="http://"+subdomain+".zino.gr";});return false;},showhideTag:function(node,show,event){if(show){if(!Tag.run){$(node).css('borderWidth','2px');Tag.ekso(event);}
return;}
$(node).css('borderWidth','0px');},parseDel:function(par){var deksia=par.nextAll().length;if(deksia===0){if(par.prevAll().length!==0){var neighbor=$(par).prev().get(0);neighbor.removeChild(neighbor.lastChild);if($(neighbor).prevAll().length!==0){neighbor=neighbor.previousSibling;neighbor.removeChild(neighbor.lastChild);neighbor.appendChild(document.createTextNode(" και "));}}}
else if(deksia===1&&par.prevAll().length!==0){var neighbor=par.prev().get(0);neighbor.removeChild(neighbor.lastChild);neighbor.appendChild(document.createTextNode(" και "));}
$(par).hide(400,function(){$(this).remove();});},resize_down:function(event){if(!Tag.run){return;}
Tag.ekso(event);Tag.resized=true;},resize_do:function(event){if(!Tag.run){return;}
var x=event.offsetX?(event.offsetX):event.pageX-$("div.thephoto").get(0).offsetLeft;var y=event.offsetY?(event.offsetY):event.pageY-$("div.thephoto").get(0).offsetTop;var pos_x=parseInt($('div.tagme').css('left'),10);var pos_y=parseInt($('div.tagme').css('top'),10);var width=x-pos_x;var height=y-pos_y;if(width>=45){$('div.tagme').css({"width":width+'px'});}
if(height>=45){$('div.tagme').css({"height":height+'px'});}
var left=parseInt($('div.tagme').css('left'),10);$('div.thephoto div.frienders').css('left',(left+width)+'px');},autocomplete:function(event){if(event.keyCode==9){var node=$("div.thephoto div.frienders ul li div");var text=node.text();if($.inArray(text,Tag.friends)!==-1){Tag.submitTag(event,text,$("div.thephoto div.frienders ul li:contains('"+text+"') a").get(0));window.setTimeout("$( 'div.thephoto' ).get( 0 ).scrollIntoView( true )",5);}
Tag.ekso(event);}}};$(function(){$('div.image_tags div').each(function(i){var username=$(this).find('a:first').text();Tag.already_tagged.push(username);var a=$(this).find('a:first').get(0);a.onmouseover=(function(username){return function(event){var nod=$("div.thephoto div.tanga div:contains('"+username+"')");Tag.showhideTag(nod,true,event);if(!Tag.run){nod.find('div').css('borderWidth','0px').show().end();}};})(username);a.onmouseout=(function(username){return function(){var nod=$("div.thephoto div.tanga div:contains('"+username+"')");Tag.showhideTag(nod,false);if(!Tag.run){nod.find('div').hide().end();}};})(username);});$('div.image_tags div a.tag_del').click(function(){Tag.parseDel($(this).parent());});$('div.thephoto div.tanga div').mouseover(function(event){Tag.showhideTag(this,true,event);});$('div.thephoto div.tanga div').mouseout(function(){Tag.showhideTag(this,false);});var border_width=3*2;var tag_width=parseInt($('div.tagme').css('width'),10);var tag_height=parseInt($('div.tagme').css('height'),10);var image_width=parseInt($('div.thephoto').css('width'),10);var image_height=parseInt($('div.thephoto').css('height'),10);var x=(image_width-tag_width-border_width)/2;var y=(image_height-tag_height-border_width)*0.25;$('div.tagme').css({left:x+'px',top:y+'px'});$('div.thephoto div.frienders').css({left:(x+tag_width)+'px',top:y+'px'});});var Notification={Visit:function(url,typeid,eventid,commentid){Notification.DecrementCount();if(typeid==3){document.location.href=url;}
else{Coala.Warm('notification/delete',{eventid:eventid,relationnotif:false});document.location.href=url;}},Delete:function(eventid){$('div#'+eventid).animate({opacity:"0",height:"0"},400,function(){$(this).remove();if($('div.notifications div.list div.event').length===0){$('div.notifications').remove();}});Coala.Warm('notification/delete',{eventid:eventid,relationnotif:false});Notification.DecrementCount();return false;},DecrementCount:function(){var count=document.title.split('(')[1].split(')')[0];--count;if(count==0){document.title='Zino';}
else{document.title='Zino ('+count+')';}},AddFriend:function(eventid,theuserid){$('div#addfriend_'+theuserid+' a').fadeOut(400,function(){$(this).parent().empty().append(document.createTextNode('Έγινε προσθήκη'));});Coala.Warm('notification/addfriend',{userid:theuserid});Coala.Warm('notification/delete',{eventid:eventid,relationnotif:false});Notification.DecrementCount();return false;}};var PollList={numoptions:0,QuestionText:'',OptionsText:'',CreateQuestion:function(){if($('div#polist ul div.creationmockup input')[0].value!==''){var heading=document.createElement('h4');var headinglink=document.createElement('a');$(headinglink).attr({'href':''}).append(document.createTextNode($('div#polist ul div.creationmockup input')[0].value));$(heading).append(headinglink).css('margin-top','0');PollList.QuestionText=$('div#polist ul div.creationmockup input')[0].value;$('div#polist ul div.creationmockup').empty().append(heading);$('div#polist ul div.creationmockup').append($('div#polist div.tip2').clone().css('display','block'));PollList.NewOption();}},CreateOption:function(newoption){if(newoption.value!==''){var option=document.createElement('div');$(option).append(document.createTextNode($(newoption)[0].value)).addClass('newoption');$($(newoption)[0].parentNode).remove();$('div#polist ul li div.creationmockup')[0].insertBefore(option,$('div#polist ul li div.creationmockup div.tip2')[0]);if(PollList.numoptions===0){var donelink=document.createElement('a');$(donelink).attr({'href':''}).addClass('button').css('font-weight','bold').append(document.createTextNode('Δημιουργία')).click(function(){PollList.OptionsText=PollList.OptionsText.substr(0,PollList.OptionsText.length-1);var newpoll=document.createElement('li');$(newpoll).html($('div#polist div.creatingpoll').html());$('div#polist ul')[0].insertBefore(newpoll,$('div#polist ul li div.creationmockup')[0].parentNode.nextSibling.nextSibling);$($('div#polist ul li div.creationmockup')[0].parentNode).remove();Coala.Warm('poll/new',{question:PollList.QuestionText,options:PollList.OptionsText,node:newpoll});PollList.numoptions=0;PollList.OptionsText='';return false;});$('div#polist ul li div.creationmockup').append(donelink);}
PollList.OptionsText+=newoption.value+'|';++PollList.numoptions;PollList.NewOption();}},Create:function(){var newpoll=document.createElement('li');$(newpoll).append($('div.creationmockup').clone());$('div#polist ul')[0].insertBefore(newpoll,$('ul li.create')[0]);$('div#polist ul div.creationmockup').css('height','0').animate({height:'40px'},400,function(){$(this).css('height','');});$('div#polist ul div.creationmockup input')[0].focus();$('div#polist ul div.creationmockup input').keydown(function(event){if(event.keyCode==13){PollList.CreateQuestion();}});$('div#polist ul div.creationmockup div a').click(function(){PollList.CreateQuestion();return false;});var link=document.createElement("a");$(link).attr({href:""}).addClass("new").append(document.createTextNode("«Ακύρωση")).click(function(){$('div#polist ul div.creationmockup').animate({height:"0"},400,function(){$(newpoll).remove();$(this).css('display','none');});PollList.Cancel();return false;});$('div#polist ul li.create').empty().append(link);return false;},Cancel:function(){PollList.numoptions=0;PollList.OptionsText='';var link=document.createElement("a");var createimg=document.createElement("img");$(createimg).attr({src:ExcaliburSettings.imagesurl+"add3.png",alt:"Δημιουργία δημοσκόπησης",title:"Δημιουργία δημοσκόπησης"});$(link).attr({href:""}).addClass("new").append(createimg).append(document.createTextNode("Δημιουργία δημοσκόπησης")).click(function(){PollList.Create();return false;});$('div#polist ul li.create').empty().append(link);},NewOption:function(){var container=document.createElement('div');var newoption=document.createElement('input');var acceptlink=document.createElement('a');var acceptimage=document.createElement('img');$(acceptimage).attr({'src':ExcaliburSettings.imagesurl+"accept.png",'alt':"Δημιουργία",'title':"Δημιουργία"});$(newoption).attr({'type':'text'}).css('width','300px').keydown(function(event){if(event.keyCode==13){PollList.CreateOption(newoption);return false;}});$(container).append(newoption).append(acceptlink);$('div#polist ul li div.creationmockup')[0].insertBefore(container,$('div#polist ul li div.creationmockup div.tip2')[0]);$(acceptlink).attr({'href':''}).append(acceptimage).click(function(node){PollList.CreateOption(newoption);return false;});$('div#polist ul li div.creationmockup div input')[0].focus();}};$(function(){$('div#polist li.create a').click(function(){PollList.Create();return false;});});var PollView={Delete:function(pollid){if(confirm("Θέλεις σίγουρα να διαγράψεις τη δημοσκόπηση;")){document.body.style.cursor='wait';Coala.Warm('poll/delete',{pollid:pollid});}
return false;},Vote:function(optionid,pollid,node){var parent=node.parentNode.parentNode.parentNode.parentNode.parentNode;$(parent).html($('div.posmall div.voting').html());Coala.Warm('poll/vote',{optionid:optionid,pollid:pollid,node:parent});}};$(function(){if($('div#pollview')[0]){var delete1=new Image();delete1.src=ExcaliburSettings.imagesurl+'delete.gif';var delete2=new Image();delete2.src=ExcaliburSettings.imagesurl+'delete2.gif';}});var JournalList={};var JournalView={Delete:function(journalid){if(confirm("Θέλεις σίγουρα να διαγράψεις την καταχώρηση;")){document.body.style.cursor='wait';Coala.Warm('journal/delete',{journalid:journalid});}
return false;},AddFav:function(journalid,linknode){if($(linknode).find('span').hasClass('s_addfav')){$(linknode).fadeOut(800,function(){$(linknode).attr({href:'',title:'Αγαπημένο'}).removeClass('s_addfav').addClass('s_isaddedfav').empty().fadeIn(800);});Coala.Warm('favourites/add',{itemid:journalid,typeid:Types.Journal});}
return false;}};var JournalNew={Create:function(journalid){var title=$('div#journalnew form div.title input')[0].value;var text=WYSIWYG.ByName.text.getContents();if(title===''){alert("Πρέπει να ορίσεις τίτλο");$('div#journalnew form div.title input')[0].focus();return false;}
if(text.length<5){alert("Δε μπορείς να δημοσιεύσεις κενή καταχώρηση");return false;}
return true;}};$(function(){if($('#journalnew')[0]){window.title='Firing "Create"';WYSIWYG.Create(document.getElementById('wysiwyg'),'text',[{'tooltip':'Έντονη Γραφή','image':ExcaliburSettings.imagesurl+'text_bold.png','command':'bold'},{'tooltip':'Πλάγια Γραφή','image':ExcaliburSettings.imagesurl+'text_italic.png','command':'italic'},{'tooltip':'Εισαγωγή Link','image':ExcaliburSettings.imagesurl+'world.png','command':WYSIWYG.CommandLink('text')},{'tooltip':'Εισαγωγή Εικόνας','image':ExcaliburSettings.imagesurl+'picture.png','command':WYSIWYG.CommandImage('text')},{'tooltip':'Εισαγωγή Video','image':ExcaliburSettings.imagesurl+'television.png','command':WYSIWYG.CommandVideo('text')}],2);}});var Join={ShowTos:function(){var area=$('div#join_tos')[0].cloneNode(true);$(area).css("display","block");Modals.Create(area,620,520);},JoinOnLoad:function(){Join.timervar=0;Join.hadcorrect=false;Join.usernameerror=false;Join.invalidusername=false;Join.pwderror=false;Join.repwderror=false;Join.usernameexists=false;Join.emailerror=false;Join.username=$('form.joinform div input')[0];Join.password=$('form.joinform div input')[1];Join.repassword=$('form.joinform div input')[2];Join.enabled=true;Join.email=$('form.joinform div input')[3];$('form.joinform').submit(function(){return false;});$('form.joinform div input').focus(function(){$(this).css("border","1px solid #bdbdff");}).blur(function(){$(this).css("border","1px solid #999");});$(Join.username).keyup(function(event){if(event.keyCode==13&&!Join.usernameerror&&!Join.usernameexists&&!Join.invalidusername){Join.password.focus();}});$(Join.password).keyup(function(event){if(event.keyCode==13&&!Join.pwderror){Join.repassword.focus();}});$(Join.repassword).keyup(function(event){if(event.keyCode==13&&!Join.repwderror){Join.email.focus();}});$(Join.email).keyup(function(event){if(event.keyCode==13&&!Join.emailerror){$('div a.button')[0].focus();}});$(Join.username).keydown(function(event){if(Join.usernameerror){if(Join.username.value.length>=4&&Join.username.value.length<=20){Join.usernameerror=false;$($('form.joinform div > span')[0]).animate({opacity:"0"},700,function(){$(this).css("display","none");});}}
if(Join.usernameexists){if(event.keyCode!=13){Join.usernameexists=false;$($('form.joinform div > span')[1]).animate({opacity:"0"},700,function(){$(this).css("display","none");});$('div a.button').removeClass('button_disabled');Join.enabled=true;}}
if(Join.invalidusername){Join.invalidusername=false;$($('form.joinform div > span')[2]).animate({opacity:"0"},700,function(){$(this).css("display","none");});}});$(Join.password).keyup(function(){if(Join.pwderror){if(Join.password.value.length>=4){Join.pwderror=false;$($('form.joinform div > span')[3]).animate({opacity:"0"},700,function(){$(this).css("display","none");});}}});$(Join.repassword).keyup(function(){if(Join.repwderror){if(Join.repassword.value==Join.password.value){Join.repwderror=false;$($('form.joinform div > span')[4]).animate({opacity:"0"},700,function(){$(this).css("display","none");});}}});$(Join.email).keyup(function(){if(Join.emailerror){if(Join.email.value===''||/^[a-zA-Z0-9.\-_]+@[a-zA-Z0-9.\-_]+$/.test(Join.email.value)){Join.emailerror=false;$($('form.joinform div > span')[5]).animate({opacity:"0"},700,function(){$(this).css("display","none");});}}});if(Join.username){Join.username.focus();}
$('form.joinform p a').click(function(){Join.ShowTos();return false;});$('div a.button').click(function(){var create=true;if(Join.username.value.length<4||Join.username.value.length>20){if(!Join.usernameerror){Join.usernameerror=true;$($('form.joinform div > span')[0]).css("opacity","0").css("display","inline").animate({opacity:"1"},400);}
Join.username.focus();create=false;}
if(Join.username.value.length>=4&&!/^[a-zA-Z][a-zA-Z\-_0-9]{3,49}$/.test(Join.username.value)){if(!Join.invalidusername){Join.invalidusername=true;$($('form.joinform div > span')[2]).css("opacity","0").css("display","inline").animate({opacity:"1"},400);}
Join.username.focus();create=false;}
if(Join.password.value.length<4){if(!Join.pwderror){Join.pwderror=true;$($('form.joinform div > span')[3]).css("opacity","0").css("display","inline").animate({opacity:"1"},400);}
if(!Join.usernamerror&&!Join.invalidusername&&!Join.usernameexists){Join.password.focus();}
create=false;}
if(Join.password.value!=Join.repassword.value&&!Join.pwderror){if(!Join.repwderror){Join.repwderror=true;$($('form.joinform div div > span')[0]).css("opacity","0").css("display","inline").animate({opacity:"1"},400);}
if(!Join.usernameerror&&!Join.invalidusername&&!Join.usernameexists){Join.repassword.focus();}
create=false;}
if(Join.email.value!==''&&!/^[a-zA-Z0-9.\-_]+@[a-zA-Z0-9.\-_]+$/.test(Join.email.value)){if(!Join.emailerror){Join.emailerror=true;$($('form.joinform div > span')[5]).css("opacity","0").css("display","inline").animate({opacity:"1"},400);}
if(!Join.usernameerror&&!Join.invalidusername&&!Join.usernameexists&&!Join.pwderror&&!Join.repwderror){Join.email.focus();}
create=false;}
if(create){if(Join.enabled){document.body.style.cursor='wait';$(this).addClass('button_disabled');Coala.Warm('user/join',{username:Join.username.value,password:Join.password.value,email:Join.email.value});}}
return false;});}};var Joined={JoinedOnLoad:function(){Joined.doby=$('div.profinfo form div select')[2];Joined.dobm=$('div.profinfo form div select')[1];Joined.dobd=$('div.profinfo form div select')[0];Joined.gender=$('div.profinfo form div select')[3];Joined.location=$('div.profinfo form div select')[4];Joined.enabled=true;Joined.invaliddob=false;$('div.profinfo form div select').change(function(){if(Joined.invaliddob){$('div.profinfo form span.invaliddob').animate({opacity:"0"},200,function(){$(this).hide();});Joined.invaliddob=false;}
else{if(Joined.doby.options[Joined.doby.selectedIndex].value!=-1&&Joined.dobm.options[Joined.dobm.selectedIndex].value!=-1&&Joined.dobd.options[Joined.dobd.selectedIndex].value!=-1){if(!Dates.ValidDate(Joined.dobd.options[Joined.dobd.selectedIndex].value,Joined.dobm.options[Joined.dobm.selectedIndex].value,Joined.doby.options[Joined.doby.selectedIndex].value)){$('div.profinfo form span.invaliddob').css('opacity','0').show().animate({opacity:"1"},200);Joined.invaliddob=true;}}}});$('div a.button').click(function(){if(Joined.enabled){$(this).addClass('button_disabled');Coala.Warm('user/joined',{doby:Joined.doby.options[Joined.doby.selectedIndex].value,dobm:Joined.dobm.options[Joined.dobm.selectedIndex].value,dobd:Joined.dobd.options[Joined.dobd.selectedIndex].value,gender:Joined.gender.options[Joined.gender.selectedIndex].value,location:Joined.location.options[Joined.location.selectedIndex].value});Joined.enabled=false;}
return false;});}};var Settings={SwitchSettings:function(divtoshow){var validtabs=['personal','characteristics','interests','contact','settings'];var found=false;var settingslis=$('div.settings div.sidebar ol li');for(i=0;i<validtabs.length;++i){if(divtoshow==validtabs[i]){$('#'+divtoshow+'info').show();Settings.FocusSettingLink(settingslis[i],true,validtabs[i]);window.location.hash=window.location.hash.substr(0,1)+validtabs[i];found=true;}
else{$('#'+validtabs[i]+'info').hide();Settings.FocusSettingLink(settingslis[i],false,validtabs[i]);}}
if(!found){$('#'+validtabs[0]+'info').show();window.location.hash=window.location.hash.substr(0,1)+'personal';Settings.FocusSettingLink(settingslis[0],true,validtabs[0]);}},FocusSettingLink:function(li,focus,tabname){if(li){if(focus){$(li).addClass('selected').removeClass(tabname).addClass('selected'+tabname);li.getElementsByTagName('a')[0].style.color='white';}
else{$(li).removeClass('selected').removeClass('selected'+tabname).addClass(tabname);;li.getElementsByTagName('a')[0].style.color='#105cb6';}}},DoSwitchSettings:function(){setTimeout(Settings.SwitchSettings,20);},Enqueue:function(key,value){Settings.queue[key]=value;$('div.savebutton a').removeClass('disabled');},Dequeue:function(){Settings.queue={};},Save:function(visual){if(visual){$('div.savebutton a').html($(Settings.showsaving).html());}
Coala.Warm('user/settings/save',Settings.queue);Settings.Dequeue();},AddInterest:function(type,typeid){var intervalue=$('div.settings div.tabs form#interestsinfo div.option div.setting div.'+type+' input')[0].value;if($.trim(intervalue)!==''){if(intervalue.length<=32){var newli=document.createElement('li');var newspan=$('div.settings div.tabs form#interestsinfo div.creation')[0].cloneNode(true);$(newspan).removeClass('creation').find('span.aplbubblemiddle').append(document.createTextNode(intervalue));var link=newspan.getElementsByTagName('a')[0];$(newli).append(newspan);$('div.settings div.tabs form#interestsinfo div.option div.setting ul.'+type).prepend(newli);Coala.Warm('user/settings/tags/new',{text:intervalue,typeid:typeid,node:link});}
else{alert('Το κείμενό σου μπορεί να έχει 32 χαρακτήρες το πολύ');}
$('div.settings div.tabs form#interestsinfo div.option div.setting div.'+type+' input')[0].value='';$('div.settings div.tabs form#interestsinfo div.option div.setting div.'+type+' input')[0].focus();}
else{alert('Δε μπορείς να προσθέσεις κενό ενδιαφέρον');$('div.settings div.tabs form#interestsinfo div.option div.setting div.'+type+' input')[0].value='';$('div.settings div.tabs form#interestsinfo div.option div.setting div.'+type+' input')[0].value='';$('div.settings div.tabs form#interestsinfo div.option div.setting div.'+type+' input')[0].focus();}},RemoveInterest:function(tagid,node){var parent=node.parentNode.parentNode;$(node).remove();$(parent).hide('slow');Coala.Warm('user/settings/tags/delete',{tagid:tagid});},SelectAvatar:function(imageid){$('#avatarlist').jqmHide();Coala.Warm('user/settings/avatar',{imageid:imageid});},AddAvatar:function(imageid){var li=document.createElement('li');$(li).hide();$('div#avatarlist ul').prepend(li);Coala.Warm('user/settings/upload',{imageid:imageid});var li2=document.createElement('li');$('div#avatarlist ul').prepend(li2);},ChangePassword:function(oldpassword,newpassword,renewpassword){if(oldpassword.length<4){Settings.oldpassworderror=true;$(Settings.oldpassworddiv).find('div div span').fadeIn(300);Settings.oldpassword.focus();}
if(newpassword.length<4&&!Settings.oldpassworderror){Settings.newpassworderror=true;$(Settings.newpassworddiv).find('div div span').fadeIn(300);Settings.newpassword.focus();}
if(newpassword!=renewpassword&&!Settings.oldpassworderror&&!Settings.newpassworderror){Settings.renewpassworderror=true;$(Settings.renewpassworddiv).find('div div span').fadeIn(300);Settings.renewpassword.focus();}
if(!Settings.oldpassworderror&&!Settings.newpassworderror&&!Settings.renewpassworderror){Settings.Enqueue('oldpassword',oldpassword);Settings.Enqueue('newpassword',newpassword);Settings.Save(false);}},SettingsOnLoad:function(){Settings.saver=0;Settings.queue={};Settings.showsaving=$('div.settings div.sidebar div.saving');Settings.invaliddob=false;Settings.slogan=$('#slogan input')[0].value;Settings.favquote=$('#favquote input')[0].value;Settings.aboutmetext=$('#aboutme textarea')[0].value;Settings.email=$('#email input')[0].value;Settings.msn=$('#msn input')[0].value;Settings.gtalk=$('#gtalk input')[0].value;Settings.skype=$('#skype input')[0].value;Settings.yahoo=$('#yahoo input')[0].value;Settings.web=$('#web input')[0].value;Settings.invalidemail=false;Settings.invalidmsn=false;Settings.oldpassworderror=false;Settings.newpassworderror=false;Settings.renewpassworderror=false;Settings.oldpassworddiv=$('div#pwdmodal div.oldpassword');Settings.newpassworddiv=$('div#pwdmodal div.newpassword');Settings.renewpassworddiv=$('div#pwdmodal div.renewpassword');Settings.oldpassword=$('div#pwdmodal div.oldpassword div input')[0];Settings.newpassword=$('div#pwdmodal div.newpassword div input')[0];Settings.renewpassword=$('div#pwdmodal div.renewpassword div input')[0];Settings.SwitchSettings(window.location.hash.substr(1));$('#gender select').change(function(){var sexselected=$('#sex select')[0].value;var relselected=$('#religion select')[0].value;var polselected=$('#politics select')[0].value;Coala.Cold('user/settings/genderupdate',{gender:this.value,sex:sexselected,religion:relselected,politics:polselected});Settings.Enqueue('gender',this.value);});$('#dateofbirth select').change(function(){var day=$('#dateofbirth select')[0].value;var month=$('#dateofbirth select')[1].value;var year=$('#dateofbirth select')[2].value;if(day!=-1&&month!=-1&&year!=-1){if(Dates.ValidDate(day,month,year)){if(Settings.invaliddob){$('div.settings div.tabs form#personalinfo div span.invaliddob').animate({opacity:"0"},1000,function(){$(this).css("display","none");});Settings.invaliddob=false;}
Settings.Enqueue('dobd',day);Settings.Enqueue('dobm',month);Settings.Enqueue('doby',year);}
else{if(!Settings.invaliddob){$('div.settings div.tabs form#personalinfo div span.invaliddob').css("display","inline").animate({opacity:"1"},200);Settings.invaliddob=true;}}}});$('#place select').change(function(){Settings.Enqueue('place',this.value);Settings.Save(false);});$('#education select').change(function(){Settings.Enqueue('education',this.value);Settings.Save(false);});$('#school select').change(function(){Settings.Enqueue('school',this.value);});$('#sex select').change(function(){Settings.Enqueue('sex',this.value);});$('#religion select').change(function(){Settings.Enqueue('religion',this.value);});$('#politics select').change(function(){Settings.Enqueue('politics',this.value);});$('#haircolor select').change(function(){Settings.Enqueue('haircolor',this.value);});$('#eyecolor select').change(function(){Settings.Enqueue('eyecolor',this.value);});$('#height select').change(function(){Settings.Enqueue('height',this.value);});$('#weight select').change(function(){Settings.Enqueue('weight',this.value);});$('#smoker select').change(function(){Settings.Enqueue('smoker',this.value);});$('#drinker select').change(function(){Settings.Enqueue('drinker',this.value);});$('#slogan input').change(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('slogan',text);}).keyup(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('slogan',text);if(Settings.slogan){Settings.slogan=this.value;}});$('#aboutme textarea').change(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('aboutme',text);}).keyup(function(){if(Settings.aboutmetext!=this.value){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('aboutme',text);if(Settings.aboutmetext){Settings.aboutmetext=this.value;}}});$('#favquote input').change(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('favquote',text);}).keyup(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('favquote',text);if(Settings.favquote){Settings.favquote=this.value;}});$('#email input').change(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('email',text);}).keyup(function(){var text=this.value;if(Settings.invalidemail){if(/^[a-zA-Z0-9.\-_]+@[a-zA-Z0-9.\-_]+$/.test(text)){$('div#email span').animate({opacity:"0"},1000,function(){$('div#email span').css("display","none");});Settings.invalidemail=false;Settings.Enqueue('email',text);}}
else{if(this.value===''){text='-1';}
Settings.Enqueue('email',text);}
if(Settings.email){Settings.email=this.value;}});$('#msn input').change(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('msn',text,500);}).keyup(function(){var text=this.value;if(Settings.invalidmsn){if(/^[a-zA-Z0-9.\-_]+@[a-zA-Z0-9.\-_]+$/.test(text)){$('div#msn span').animate({opacity:"0"},1000,function(){$('div#msn span').css("display","none");});Settings.invalidmsn=false;Settings.Enqueue('msn',text);}}
else{if(this.value===''){text='-1';}
Settings.Enqueue('msn',text);}
if(Settings.msn){Settings.msn=this.value;}});$('#gtalk input').change(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('gtalk',text);}).keyup(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('gtalk',text);if(Settings.gtalk){Settings.gtalk=this.value;}});$('#skype input').change(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('skype',text);}).keyup(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('skype',text);if(Settings.skype){Settings.skype=this.value;}});$('#yahoo input').change(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('yahoo',text);}).keyup(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('yahoo',text);if(Settings.yahoo){Settings.yahoo=this.value;}});$('#web input').change(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('web',text0);}).keyup(function(){var text=this.value;if(this.value===''){text='-1';}
Settings.Enqueue('web',text);if(Settings.skype){Settings.skype=this.value;}});$('form#interestsinfo div.option div.setting div.hobbies input').keydown(function(event){if(event.keyCode==13){Settings.AddInterest('hobbies',1);}});$('form#interestsinfo div.option div.setting div.hobbies a').click(function(){Settings.AddInterest('hobbies',1);return false;});$('form#interestsinfo div.option div.setting div.movies input').keydown(function(event){if(event.keyCode==13){Settings.AddInterest('movies',2);}});$('form#interestsinfo div.option div.setting div.movies a').click(function(){Settings.AddInterest('movies',2);return false;});$('form#interestsinfo div.option div.setting div.books input').keydown(function(event){if(event.keyCode==13){Settings.AddInterest('books',3);}});$('form#interestsinfo div.option div.setting div.books a').click(function(){Settings.AddInterest('books',3);return false;});$('form#interestsinfo div.option div.setting div.songs input').keydown(function(event){if(event.keyCode==13){Settings.AddInterest('songs',4);}});$('form#interestsinfo div.option div.setting div.songs a').click(function(){Settings.AddInterest('songs',4);return false;});$('form#interestsinfo div.option div.setting div.artists input').keydown(function(event){if(event.keyCode==13){Settings.AddInterest('artists',5);}});$('form#interestsinfo div.option div.setting div.artists a').click(function(){Settings.AddInterest('artists',5);return false;});$('form#interestsinfo div.option div.setting div.games input').keydown(function(event){if(event.keyCode==13){Settings.AddInterest('games',6);}});$('form#interestsinfo div.option div.setting div.games a').click(function(){Settings.AddInterest('games',6);return false;});$('form#interestsinfo div.option div.setting div.shows input').keydown(function(event){if(event.keyCode==13){Settings.AddInterest('shows',7);}});$('form#interestsinfo div.option div.setting div.shows a').click(function(){Settings.AddInterest('shows',7);return false;});$('form#settingsinfo div.setting table tbody tr td input').click(function(){var value=$(this)[0].checked;if(value){value='yes';}
else{value='no';}
Settings.Enqueue($(this)[0].id,value);});$('div.savebutton a').click(function(){if(!$(this).hasClass('disabled')){Settings.Save(true);}
return false;});$('#avatarlist').jqm({trigger:'div.changeavatar a',overlayClass:'mdloverlay1'});$('#pwdmodal').jqm({trigger:'div.changepwdl a.changepwdlink',overlayClass:'mdloverlay1'});$(Settings.oldpassword).keyup(function(event){if(event.keyCode==13&&!Settings.oldpassworderror){Settings.newpassword.focus();}
if(event.keyCode!=13&&Settings.oldpassworderror&&Settings.oldpassword.value.length>=4){Settings.oldpassworderror=false;$(Settings.oldpassworddiv).find('div div span').fadeOut(300);}});$(Settings.newpassword).keyup(function(event){if(event.keyCode==13&&!Settings.newpassworderror){Settings.renewpassword.focus();}
if(Settings.newpassworderror&&Settings.newpassword.value.length>=4){Settings.newpassworderror=false;$(Settings.newpassworddiv).find('div div span').fadeOut(300);}});$(Settings.renewpassword).keyup(function(event){if(event.keyCode==13&&!Settings.renewpassworderror){$('div#pwdmodal div.save a.save')[0].focus();}
if(Settings.renewpassworderror&&Settings.renewpassword.value==Settings.newpassword.value){Settings.renewpassworderror=false;$(Settings.renewpassworddiv).find('div div span').fadeOut(300);}});$('div#pwdmodal div.save a').click(function(){Settings.ChangePassword(Settings.oldpassword.value,Settings.newpassword.value,Settings.renewpassword.value);return false;});Settings.oldpassword.focus();}};var Profile={AntisocialCalled:false,AddAvatar:function(imageid){var li=document.createElement('li');var link=document.createElement('a');$(li).append(link);$('div.main div.photos ul').prepend(li);Coala.Warm('user/avatar',{imageid:imageid});$('div.main div.ybubble').animate({height:"0"},400,function(){$(this).remove();});},AddFriend:function(userid){if(!this.AntisocialCalled){return this.AntisocialAddFriend(userid);}
$('div.sidebar div.basicinfo div a span.s_addfriend').parent().fadeOut(400,function(){$(this).parent().css('display','hidden').append(document.createTextNode('Έγινε προσθήκη')).fadeIn(400);});Coala.Warm('user/relations/new',{userid:userid});return false;},DeleteFriend:function(relationid){$('div.sidebar div.basicinfo div a span.s_deletefriend').parent().fadeOut(400,function(){$(this).parent().css('display','hidden').append(document.createTextNode('Έγινε διαγραφή')).fadeIn(400);});Coala.Warm('user/relations/delete',{relationid:relationid});return false;},ShowFriendLinks:function(relationstatus,id){var text;if(relationstatus){text=document.createTextNode('Προσθήκη στους φίλους');$('div.sidebar div.basicinfo div.friendedit').addClass('common').removeClass('friendedit').find('a').click(function(){Profile.AddFriend(id);return false;}).append(text).find('span').addClass('s_addfriend');}
else{text=document.createTextNode('Διαγραφή από τους φίλους');$('div.sidebar div.basicinfo div.friendedit').addClass('common').removeClass('friendedit').find('a').click(function(){Profile.DeleteFriend(id);return false;}).append(text).find('span').addClass('s_deletefriend');}},ShowOnlineSince:function(lastonline){if(lastonline){text=document.createTextNode(lastonline);$('div.sidebar div.basicinfo dl.online dd').append(text);}
else{$('div.sidebar div.basicinfo dl.online').hide();}},AntisocialAddFriend:function(userid){this.AntisocialCalled=true;if(!$('#antisocial')[0]){this.AddFriend(userid);return;}
setTimeout(function(){$('#antisocial').slideUp('slow');},1201);$('#antisocial div').animate({opacity:0},200,'swing',function(){$('#antisocial div').html('<strong>Έγινε προσθήκη</strong>').animate({opacity:1},200)});this.AddFriend(userid);return false;},CheckBirthday:function(year,month,day){var Now=new Date();$('#birthday + dd').html(Now.getFullYear()-year);if(Now.getDate()==day&&Now.getMonth()==month-1){$('#birthday').html('<img src="'+ExcaliburSettings.imagesurl+'cake.png" alt="Χρόνια πολλά!" title="Χρόνια πολλά!" /> <strong>Μόλις έγινε</strong>');}},Tweet:{Delete:function(){Coala.Warm('status/new',{message:''});$('div.tweetactive').remove();$('#tweetedit').jqmHide();},Renew:function(message){if(message===''){return Tweet.Delete();}
$('div.tweetactive div.tweet a span').empty()[0].appendChild(document.createTextNode(message));$('#tweetedit form input')[0].value=message;Coala.Warm('status/new',{message:message});$('#tweetedit').jqmHide();}},MyProfileOnLoad:function(){$('#tweetedit').jqm({trigger:'div.tweetbox div.tweet div a',overlayClass:'mdloverlay1'});$('div.tweetactive div.tweet a').click(function(){var win=$('#tweetedit')[0];var links=$(win).find('a');$(links[0]).click(function(){Profile.Tweet.Renew($(win).find('input')[0].value);return false;});$(links[1]).click(function(){Profile.Tweet.Delete();return false;});$(win).find('form').submit(function(){Profile.Tweet.Renew($(win).find('input')[0].value);return false;});var inp=$(win).find('input')[0];inp.select();inp.focus();return false;});}};var Suggest={list:{'hobbies':new Array(0),'movies':new Array(0),'books':new Array(0),'songs':new Array(0),'artists':new Array(0),'games':new Array(0),'shows':new Array(0)},requested:{'hobbies':new Array(0),'movies':new Array(0),'books':new Array(0),'songs':new Array(0),'artists':new Array(0),'games':new Array(0),'shows':new Array(0)},type2int:function(type){switch(type){case'hobbies':return 1;case'movies':return 2;case'books':return 3;case'songs':return 4;case'artists':return 5;case'games':return 6;case'shows':return 7;default:return-1;}},selectMove:function(event,type){if($('div.'+type+' form').css("display")=="none"){return;}
var sel=$('div.'+type+' select');var selindex=sel.attr("selectedIndex");if(selindex===undefined){selindex=0;}
if((selindex===0&&event.keyCode==38)||(selindex==sel.get(0).options.length-1&&event.keyCode==40)){$('div.'+type+' input').focus();}
else if(event.keyCode==27){$('div.'+type).find('form').hide().find('select').attr('size',0).find('option').remove().end().find('input').focus();return;}
else if(event.keyCode==13){var text=sel.get(0).options[selindex].value;$('div.'+type+' input').val(text).focus();var typeid=Suggest.type2int(type);if(typeid===-1){return;}
Settings.AddInterest(type,typeid);sel.attr('size',0).find('option').remove();$('div.'+type+' form').hide();}},inputMove:function(event,type){if($('div.'+type+' form').css("display")=="none"){return;}
var sel=$('div.'+type+' select');if(event.keyCode==40){sel.attr('selectedIndex',0);sel.focus();}
else if(event.keyCode==38){sel.attr('selectedIndex',sel.get(0).options.length-1);sel.focus();}
else{$('div.'+type+' form').hide();sel.attr('size',0).find('option').remove();}},suggestCallback:function(type,suggestions,callbacked){if(suggestions.length===undefined||suggestions.length==0){return;}
var sugLength=suggestions.length;for(var i=0;i<suggestions.length;++i){if($.inArray(suggestions[i],Suggest.list[type])===-1){Suggest.list[type].push(suggestions[i]);}
else if(callbacked){suggestions[i]='';--sugLength;}}
$('div.'+type+' form').show();var sel=$('div.'+type+' select').get(0);var counter;if(!callbacked||sel.size===undefined){sel.size=(sugLength>=5)?5:sugLength;counter=0;}
else{sel.size=(sel.size+sugLength>=5)?5:(sel.size+sugLength);counter=sel.childNodes.length;}
var text=$('div.'+type+' input').val();for(var i in suggestions){if(suggestions[i]!==''){var opt=document.createElement('option');opt.value=suggestions[i];opt.onclick=function(){var typeid=Suggest.type2int(type);if(typeid==-1){return;}
$('div.'+type+' input').focus().get(0).value=this.value;Settings.AddInterest(type,typeid);$('div.'+type+' form').hide().find('select').attr('size',0).find('option').remove();};opt.onmouseover=function(type,counter){return function(){$('div.'+type+' select').focus().attr('selectedIndex',''+counter);};}(type,counter);var divani=document.createElement('div');divani.style.fontWeight='bold';divani.style.display='inline';divani.appendChild(document.createTextNode(text));opt.appendChild(divani);opt.appendChild(document.createTextNode(suggestions[i].substr(text.length)));sel.appendChild(opt);++counter;}}},fire:function(event,type){if(event.keyCode==38||event.keyCode==40){return;}
if(event.keyCode==27){$('div.'+type).find('form').hide().find('select').attr('size',0).find('option').remove().end().find('input').focus();return;}
var text=$('div.'+type+' input').val();if(event.keyCode==13||$.trim(text)===''){return;}
var suggestions=$.grep(Suggest.list[type],function(item,index){return(item.toUpperCase().substr(0,text.length)==text.toUpperCase());});Suggest.suggestCallback(type,suggestions,false);if(suggestions.length>40||$.inArray(text,Suggest.requested[type])!==-1){return;}
Coala.Cold('user/settings/tags/suggest',{'text':text,'type':type,'callback':Suggest.suggestCallback});Suggest.requested[type].push(text);}};$(function(){$('div.add select option').remove();});var Banner={isanimating:false,Login:function(){var menu=$('div#banner ul')[0];var options=$('div#banner ul li');if(Banner.isanimating){return;}
Banner.isanimating=true;if(options[0].style.display===''){$(menu).animate({opacity:"0"},function(){options[0].style.display='none';options[1].style.display='none';$(options[3]).show();$(options[4]).show();$(options[5]).show();$(menu).animate({opacity:"1"},500,function(){Banner.isanimating=false;});$('div#banner ul input')[0].value='';$('div#banner ul input')[1].value='';$('div#banner ul input')[0].focus();});}
else{$(menu).animate({opacity:"1"},500,function(){$(options[0]).show();$(options[1]).show();$(options[3]).hide();$(options[4]).hide();$(options[5]).hide();$(menu).animate({opacity:"1"},500,function(){Banner.isanimating=false;});});}}};$('div.banner').ready(function(){$('div.search form input.text').focus(function(){this.value='';});$('div.search form input.text').blur(function(){this.value='αναζήτησε φίλους';});});function dateDiff(dateTimeBegin,dateTimeEnd){var endval=new Date();var beginval=new Date();if(typeof dateTimeEnd!='undefined'){var dateAndTime=dateTimeEnd.split(' ');var dateEnd=dateAndTime[0];var timeEnd=dateAndTime[1];var dateParts=dateEnd.split('-');var timeParts=timeEnd.split(':');endval.setFullYear(dateParts[0]);endval.setMonth(dateParts[1]);endval.setDate(dateParts[2]);endval.setHours(timeParts[0]);endval.setMinutes(timeParts[1]);endval.setSeconds(timeParts[2]);}
var dateAndTime=dateTimeBegin.split(' ');var dateBegin=dateAndTime[0];var timeBegin=dateAndTime[1];var dateParts=dateBegin.split('-');var timeParts=timeBegin.split(':');beginval.setFullYear(dateParts[0]);beginval.setMonth(dateParts[1]);beginval.setDate(dateParts[2]);beginval.setHours(timeParts[0]);beginval.setMinutes(timeParts[1]);beginval.setSeconds(timeParts[2]);var diff=Date.parse(endval.toString())-Date.parse(beginval.toString());diff/=1000;if(diff<0){return false;}
var years=0;var months=0;var weeks=0;var days=0;var hours=0;var minutes=0;var seconds=0;if(diff%604800>0){var rest1=diff%604800;weeks=(diff-rest1)/604800;if(rest1%86400>0){var rest2=(rest1%86400);days=(rest1-rest2)/86400;if(rest2%3600>0){var rest3=(rest2%3600);hours=(rest2-rest3)/3600;if(rest3%60>0){seconds=(rest3%60);minutes=(rest3-seconds)/60;}
else{minutes=rest3/60;}}
else{hours=rest2/3600;}}
else{days=rest1/86400;}}
else{weeks=diff/604800;}
if(weeks){hours=0;}
if(days||weeks){minutes=0;}
months=Math.floor(weeks/4);if(months){weeks-=months*4;}
years=Math.floor(months/12);if(years){months-=years*12;}
return{'years':years,'months':months,'weeks':weeks,'days':days,'hours':hours,'minutes':minutes};}
function greekDateDiff(diff){years=diff['years'];months=diff['months'];weeks=diff['weeks'];days=diff['days'];hours=diff['hours'];minutes=diff['minutes'];if(years){if(years==1){return'πέρσι';}
if(years==2){return'πρόπερσι';}
return'πριν '+years+' χρόνια';}
if(months){if(months==1){return'τον προηγούμενο μήνα';}
return'πριν '+months+' μήνες';}
if(weeks){if(weeks==1){return'την προηγούμενη εβδομάδα';}
return'πριν '+weeks+' εβδομάδες';}
if(days){if(days==1){return'χθες';}
if(days==2){return'προχθές';}
return'πριν '+days+' μέρες';}
if(hours){if(hours==1){return'πριν 1 ώρα';}
return'πριν '+hours+' ώρες';}
if(minutes){if(minutes==1){return'πριν 1 λεπτό';}
if(minutes==15){return'πριν ένα τέταρτο';}
if(minutes==30){return'πριν μισή ώρα';}
if(minutes==45){return'πριν τρία τέταρτα';}
return'πριν '+minutes+' λεπτά';}
return'πριν λίγο';}
var pms={unreadpms:0,activefolder:0,node:0,activepm:0,pmsinfolder:0,messagescontainer:$('#messages')[0],writingnewpm:false,ShowFolder:function(folder,folderid){if(pms.activefolder===0){pms.node=$('#folders div')[0];pms.activefolder=pms.node;}
pms.activefolder.className='';$(pms.activefolder).addClass('folder').addClass('noactivefolder');if(pms.activefolder!=pms.node){$(pms.activefolder).addClass('top');}
folder.className='';$(folder).addClass('activefolder').addClass('folder');if(folder!=pms.node){$(folder).addClass('top');}
pms.activefolder=folder;Coala.Cold('pm/folder/show',{folderid:folderid},function(errcode){alert('Coala error: '+errcode);});},ShowFolderPm:function(folder,folderid){pms.activepm=0;pms.writingnewpm=false;pms.ShowAnimation('Παρακαλώ περιμένετε...');pms.ShowFolder(folder,folderid);},ExpandPm:function(pmdiv,notread,pmid,folderid){var messagesdivdivs=$('#pm_'+pmid+' div')[0];var textpm=$('#pm_'+pmid+' div.text')[0];var lowerlinepm=$('#pm_'+pmid+' div.lowerline')[0];$(textpm).toggle();$(lowerlinepm).toggle();pms.activepm=pmdiv;if(notread){$('#pm_'+pmid+' div.infobar span.unreadpm').hide();Coala.Warm('pm/expand',{pmid:pmid,folderid:folderid});pms.UpdateUnreadPms(-1);}},NewFolder:function(){var newfolderdiv=$('#newfolderlink')[0];var newfoldermodal=document.getElementById('newfoldermodal').cloneNode(true);$(newfoldermodal).show();newfoldermodalinput=newfoldermodal.getElementsByTagName('input');textbox=newfoldermodalinput[0];Modals.Create(newfoldermodal,250,80);textbox.focus();textbox.select();newfolderdiv.className='';$(newfolderdiv).addClass('folder').addClass('newfolderactive').addClass('top');if(pms.activefolder===0){pms.node=$('#folders div')[0];pms.activefolder=pms.node;}
pms.activefolder.className='';$(pms.activefolder).addClass('folder').addClass('noactivefolder');if(pms.activefolder!=pms.node){$(pms.activefolder).addClass('top');}},CancelNewFolder:function(){if(pms.activefolder===0){pms.node=$('#folders div')[0];pms.activefolder=pms.node;}
pms.activefolder.className='';$(pms.activefolder).addClass('folder').addClass('activefolder');if(pms.activefolder!=pms.node){$(pms.activefolder).addClass('top');}
$('#newfolderlink')[0].className='';$('#newfolderlink').addClass('folder').addClass('top').addClass('newfolder');Modals.Destroy();},ValidFolderName:function(text){var name=text.replace(/(\s+$)|(^\s+)/g,'');if(name=='Εισερχόμενα'||name=='Απεσταλμένα'){return false;}
else if(name.length<=2){return false;}
else if(name===''){return false;}
return true;},CreateNewFolder:function(formnode){var formnodeinput=formnode.getElementsByTagName('input');inputbox=formnodeinput[0];var foldername=inputbox.value;if(!pms.ValidFolderName(foldername)){alert('Δεν μπορείς να ονομάσεις έτσι τον φάκελό σου');inputbox.select();return;}
pms.ShowAnimation('Δημιουργία φακέλου...');Coala.Warm('pm/folder/new',{foldername:foldername});},DeleteFolder:function(folderid){Modals.Confirm('Θέλεις σίγουρα να σβήσεις τον φάκελο;',function(){$('#folder_'+folderid).animate({opacity:'0',height:'0'},function(){$(this).remove();if(!pms.writingnewpm){var inboxstring=$($('#folders div')[0]).attr("id");var inboxarr=inboxstring.split('_');var inboxid=inboxarr[1];pms.ShowFolderPm($('#folders div')[0],inboxid);}});Coala.Warm('pm/folder/delete',{folderid:folderid});});},RenameFolder:function(folderid){var name=prompt('Πληκτρολόγησε ένα νέο όνομα για τον φάκελό σου');if(name===null){return;}
if(!pms.ValidFolderName(name)){alert('Δεν μπορείς να ονομάσεις έτσι τον φάκελό σου');return;}
Coala.Warm('pm/folder/rename',{'folderid':folderid,'newname':name});$('#folder_'+folderid+' a.folderlinks').empty().append(document.createTextNode(name));},NewMessage:function(touser,answertext){pms.ClearMessages();var receiversdiv=document.createElement('div');var receiversinput=document.createElement('input');receiversinput.type='text';$(receiversinput).css("width","250px").css("color","#9d9d9d");if(touser!==''){receiversinput.value=touser;}
pms.messagescontainer.appendChild(receiversdiv);if(answertext!==''){var textmargin=document.createElement('div');$(textmargin).css("border","1px dotted #b9b8b8").css("padding","4px").css("color","#767676").css("width","550px");$(textmargin).html(answertext);$(pms.messagescontainer).append(textmargin).append(document.createElement('br')).append(document.createElement('br'));}
var receiverstext=document.createElement('span');$(receiverstext).css("padding-right","30px");receiverstext.appendChild(document.createTextNode('Παραλήπτες'));$(receiverstext).css("font-weight","bold");$(receiversdiv).append(receiverstext).append(receiversinput).append(document.createElement('br')).append(document.createElement('br'));var pmtext=document.createElement('textarea');$(pmtext).css("width","550px").css("height","330px");var sendbutton=document.createElement('input');$(sendbutton).attr({type:'button',value:'Αποστολή'});$(sendbutton).click(function(){pms.SendPm();});var cancelbutton=document.createElement('input');$(cancelbutton).attr({type:'button',value:'Επαναφορά'});$(cancelbutton).click(function(){receiversinput.value='';pmtext.value='';});var actions=document.createElement('div');$(actions).append(sendbutton).append(cancelbutton);$(pms.messagescontainer).append(pmtext).append(document.createElement('br')).append(document.createElement('br')).append(actions);pms.ShowFolderNameTop('Νέο μήνυμα');if(answertext!==''){pmtext.focus();pmtext.select();}
else{receiversinput.focus();receiversinput.select();}
pms.writingnewpm=true;},SendPm:function(){var messagesdivinputlist=pms.messagescontainer.getElementsByTagName('input');var receiverslist=messagesdivinputlist[0];var messagesdivtextarealist=pms.messagescontainer.getElementsByTagName('textarea');var pmtext=messagesdivtextarealist[0];pms.ShowAnimation('Αποστολή μηνύματος...');Coala.Warm('pm/send',{usernames:receiverslist.value,pmtext:pmtext.value});},DeletePm:function(msgnode,pmid,folderid,read){Modals.Confirm('Θέλεις σίγουρα να διαγράψεις το μήνυμα;',function(){pms.activepms=0;var delimg2=$('#pm_'+pmid+' div.infobar span.unreadpm')[1];$('#pm_'+pmid+' div.lowerline').hide();if(delimg2){$(delimg2).hide();}
$(msgnode).hide(700,function(){$(this).remove();});if(!read){pms.UpdateUnreadPms(-1);}
pms.pmsinfolder--;pms.WriteNoPms();Coala.Warm('pm/delete',{pmid:pmid,folderid:folderid});});},UpdateUnreadPms:function(specnumber){var unreadmsgbanner=$("#unreadmessages")[0];var incomingdiv=$('#folders div')[0];var incominglink=incomingdiv.firstChild;var newtext;var newtext2;while(incominglink.firstChild){incominglink.removeChild(incominglink.firstChild);}
while(unreadmsgbanner.firstChild){unreadmsgbanner.removeChild(unreadmsgbanner.firstChild);}
if(unreadpms>1){if(specnumber==-1){--unreadpms;newtext=document.createTextNode('Εισερχόμενα ('+unreadpms+')');if(unreadpms==1){newtext2=document.createTextNode('1 Νέο Μήνυμα');}
else{newtext2=document.createTextNode(unreadpms+' Νέα Μηνύματα');}}
else{newtext=document.createTextNode('Εισερχόμενα ('+specnumber+')');newtext2=document.createTextNode(specnumber+' Νέα Μηνύματα');}}
else{if(specnumber==-1&&unreadpms==1){unreadpms=0;}
newtext=document.createTextNode('Εισερχόμενα');newtext2=document.createTextNode('Μηνύματα');}
var folderspan=document.createElement('span');var bannerspan=document.createElement('span');$(incominglink).append(folderspan);$(incominglink).append(newtext);$(unreadmsgbanner).append(bannerspan);$(unreadmsgbanner).append(newtext2);if(unreadpms==0){$(unreadmsgbanner).removeClass("unread");}},ShowFolderNameTop:function(texttoshow){var messagesdivparent=pms.messagescontainer.parentNode.parentNode;var messagesdivdiv=messagesdivparent.getElementsByTagName('div');var foldertext=messagesdivdiv[1];$(foldertext.firstChild).remove();$(foldertext).append(document.createTextNode(texttoshow));},ShowAnimation:function(texttoshow){pms.ClearMessages();var loadinggif=document.createElement('img');$(loadinggif).attr({src:ExcaliburSettings.imagesurl+'ajax-loader.gif',alt:texttoshow,title:texttoshow});var loadingtext=document.createTextNode(' '+texttoshow);$(pms.messagescontainer).append(loadinggif).append(loadingtext);},ClearMessages:function(){$(pms.messagescontainer).empty();},WriteNoPms:function(){var messagescontainerdivlist=pms.messagescontainer.getElementsByTagName('div');if(messagescontainerdivlist.length/12==1){nopmsspan=document.createElement('span');$(nopmsspan).html('Δεν έχεις μηνύματα σε αυτό το φάκελο.<br />Μετακίνησε κάποια μηνύματα με το ποντίκι σε αυτό το φάκελο για να τα μεταφέρεις εδώ.');$(pms.messagescontainer).append(nopmsspan);$(nopmsspan).animate({opacity:"1"},2000);}}};$(function(){if($('#pms')[0]){$('div.message').draggable({helper:'original',revert:'true',cursor:'move'});$('div.createdfolder').droppable({accept:"div.message",hoverClass:"hoverfolder",tolerance:"pointer",drop:function(ev,ui){Coala.Warm('pm/transfer',{'pmid':ui.draggable.attr("id").substring(3),'folderid':$('div.activefolder').attr("id").substring(7),'targetfolderid':$(this).attr("id").substring(7)});ui.draggable.animate({opacity:"0",height:"0"},700,function(){ui.draggable.remove();});}});}});var Frontpage={Closenewuser:function(node){$('div.frontpage div.ybubble').animate({height:'0'},800,function(){$(this).remove();});},DeleteShout:function(shoutid){if(confirm('Θέλεις σίγουρα να διαγράψεις το μήνυμα;')){$('div#s_'+shoutid).animate({height:"0",opacity:"0"},300,function(){$(this).remove();});Coala.Warm('shoutbox/delete',{shoutid:shoutid});return false;}},FrontpageOnLoad:function(){if($('div.members div.join')[0]){$('div.members div.join input')[1].focus();}
$('div.shoutbox div.comments div.newcomment div.bottom input').click(function(){var list=$('div.frontpage div.inuser div.shoutbox div.comments');var text=$(list).find('div.newcomment div.text textarea')[0].value;if($.trim(text)===''){alert('Δε μπορείς να δημοσιεύσεις κενό μήνυμα');$(list).find('div.newcomment div.text textarea')[0].value='';$(list).find('div.newcomment div.text textarea')[0].focus();}
else{var newshout=$(list).find('div.empty')[0].cloneNode(true);$(newshout).removeClass('empty').insertAfter($(list).find('div.newcomment')[0]).show().css("opacity","0").animate({opacity:"1"},400).find('div.text');var copytext=text;if($.browser.msie){$(newshout).find('div.text').append(document.createTextNode(copytext));}
else{$(newshout).find('div.text').append(document.createTextNode(copytext.replace(/&nbsp;/g,' ')));}
Coala.Warm('shoutbox/new',{text:text,node:newshout});$(list).find('div.newcomment div.text textarea')[0].value='';}});if($('div.frontpage div.ybubble')[0]){$('#selectplace select').change(function(){var place=$('#selectplace select')[0].value;$('div.ybubble div.body div.saving').removeClass('invisible');Coala.Warm('frontpage/welcomeoptions',{place:place});});$('#selecteducation select').change(function(){var edu=$('#selecteducation select')[0].value;$('div.ybubble div.body div.saving').removeClass('invisible');Coala.Warm('frontpage/welcomeoptions',{education:edu});});$('#selectuni select').change(function(){var uni=$('#selectuni select')[0].value;$('div.ybubble div.body div.saving').removeClass('invisible');Coala.Warm('frontpage/welcomeoptions',{university:uni});});}
if($('div.frontpage div.notifications div.list')[0]){var notiflist=$('div.notifications div.list')[0];var notiflistheight=$(notiflist)[0].offsetHeight;$('div.notifications div.list div.event').mouseover(function(){$(this).css("border","1px dotted #666").css("padding","4px");}).mouseout(function(){$(this).css("border","0").css("padding","5px");});$('div.notifications div.expand a').click(function(){if($(notiflist).css('display')=="none"){$('div.notifications div.expand a').css("background-image",'url( "'+ExcaliburSettings.imagesurl+'arrow_up.png" )').attr({title:'Απόκρυψη'});$(notiflist).show().animate({height:notiflistheight},400);}
else{$('div.notifications div.expand a').css("background-image",'url( "'+ExcaliburSettings.imagesurl+'arrow_down.png" )').attr({title:'Εμφάνιση'});$(notiflist).animate({height:"0"},400,function(){$(notiflist).hide();});}
return false;});}
var username=GetUsername();if(username){$("div.shoutbox div.comment[id^='s_']").each(function(){if(username==$(this).find('div.who a img.avatar').attr('alt')){var shoutid=this.id.substr(2,this.id.length-2);var toolbox=document.createElement('div');var deletelink=document.createElement('a');$(deletelink).attr('href','').css('padding-left','16px').click(function(){return Frontpage.DeleteShout(shoutid);});$(toolbox).addClass('toolbox').append(deletelink);$(this).prepend(toolbox);}});}}};var MoodDropdown={CurrentOpen:0,Unpush:function(){if(MoodDropdown.CurrentOpen===0){return;}
$(MoodDropdown.CurrentOpen).css('overflow','hidden').find('a')[0].style.backgroundImage='url(\''+ExcaliburSettings.imagesurl+'dropbutton.png\')';$(MoodDropdown.CurrentOpen).find('div.pick').fadeOut(400);$(MoodDropdown.CurrentOpen).find('div.view').css('opacity',1);MoodDropdown.CurrentOpen=0;},Select:function(id,moodid,who){Settings.Enqueue('mood',moodid,3000);var imgnode=$(who.parentNode.parentNode.parentNode.parentNode).find('div.view img.selected')[0];imgnode.src=$(who).find('img')[0].src;imgnode.alt=$(who).find('img')[0].alt;imgnode.title=$(who).find('img')[0].title;MoodDropdown.Unpush();},Push:function(who){if(MoodDropdown.CurrentOpen!==0){if(MoodDropdown.CurrentOpen==who){MoodDropdown.Unpush();return;}}
MoodDropdown.CurrentOpen=who;$(who).css('overflow','').find('a')[0].style.backgroundImage='url(\''+ExcaliburSettings.imagesurl+'dropbuttonpushed.png\')';$(who).find('div.view').css('opacity',0.5);$(who).find('div.pick').hide();$(who).find('div.pick').fadeIn(400);$(who).find('ul li a').click(function(event,a){MoodDropdown.Unpush(who);return false;});}};var ExcaliburSettings={applicationname:'Zino',imagesurl:'http://static.zino.gr/phoenix/',webaddress:'https://beta.zino.gr/phoenix',photosurl:'http://images.zino.gr/media/',image_proportional_210x210:'210',image_cropped_100x100:'100',image_cropped_150x150:'150',image_fullview:'full'};function GetUsername(){var username=false;if($('a.profile')[0]){if($('a.profile span.imageview img')[0]){username=$('a.profile span.imageview img').attr('alt');}
else{username=$('a.profile').text();}}
else{username=false;}
return username;}
function IsAdmin(username){}
var Types={Poll:1,Image:2,Userprofile:3,Journal:4};var Questions={busy:false,Renew:function(questionid,questiontext){$('div.newquestion p.question').empty().text(questiontext);$('div.newquestion form#newanswer input')[0].value=questionid;$('div.newquestion form#newanswer input')[1].value='';$('div.newquestion form#newanswer a:last').get(0).onclick=function(){Coala.Cold('question/get',{'callback':Questions.Renew,'excludeid':questionid});return false;};$('div.newquestion').fadeIn('fast');$('div.newquestion form#newanswer input')[1].focus();},Answer:function(){var answerText=$('form#newanswer input')[1].value;var questionText=$('div.newquestion p.question')[0].childNodes[0].nodeValue;if($.trim(answerText)===''){alert('Δεν μπορείς να δημοσιεύσεις μία κενή απάντηση!');return;}
Coala.Warm('question/answer/new',{'questionid':$('form#newanswer input')[0].value,'answertext':answerText,'callback':Questions.AnswerCallback});Coala.Cold('question/get',{'callback':Questions.Renew});var li=document.createElement('li');$(li).mouseover(function(){$(this).find('a').show();}).mouseout(function(){$(this).find('a').hide();});var question=document.createElement('p');question.className='question';var answer=document.createElement('p');answer.className='answer';var edit=document.createElement('a');edit.style.display="none";var editimg=document.createElement('img');editimg.src=ExcaliburSettings.imagesurl+'edit.png';var del=document.createElement('a');del.style.display="none";var delimg=document.createElement('img');delimg.src=ExcaliburSettings.imagesurl+'delete.png';question.appendChild(document.createTextNode(questionText));answer.appendChild(document.createTextNode(answerText));edit.appendChild(editimg);del.appendChild(delimg);li.appendChild(question);li.appendChild(answer);li.appendChild(edit);li.appendChild(del);$('div#answers ul.questions').prepend(li);$('div.newquestion')[0].style.display='none';},AnswerCallback:function(id){$('div#answers ul.questions li:first').attr("id","q_"+id).find("a:first").click(function(){Questions.Edit(id);return false;}).end().find("a:last").click(function(){Questions.Delete(id);return false;});},Edit:function(id){if(Questions.busy){return;}
Questions.busy=true;var form=document.createElement('form');form.onsubmit=function(){return false;};var input=document.createElement('input');input.value=$('li#q_'+id+' p.answer').get(0).firstChild.nodeValue;$(input).keydown(function(event){if(event.keyCode==13){Questions.submitEdit(id);}}).blur(function(){Questions.submitEdit(id);});var accept=document.createElement('a');accept.onclick=function(){Questions.submitEdit(id);};var acceptimg=document.createElement('img');acceptimg.alt="Επεξεργασία";acceptimg.title="Επεξεργασία";acceptimg.src=ExcaliburSettings.imagesurl+'accept.png';var cancel=document.createElement('a');cancel.onclick=function(){Questions.finishEdit(id,false);return false;};var cancelimg=document.createElement('img');cancelimg.alt="Ακύρωση";cancelimg.title="Ακύρωση";cancelimg.src=ExcaliburSettings.imagesurl+'cancel.png';accept.appendChild(acceptimg);cancel.appendChild(cancelimg);form.appendChild(input);form.appendChild(document.createTextNode(" "));form.appendChild(accept);form.appendChild(cancel);$('li#q_'+id+' p.answer, li#q_'+id+' a').hide();Questions.hide();$('li#q_'+id).get(0).appendChild(form);$(accept).show();$(cancel).show();},submitEdit:function(id){var texter=$('li#q_'+id+' form input').val();if($.trim(texter)===''){alert("Δεν μπορείς να δημοσιεύσεις μία κενή απάντηση");return false;}
Coala.Warm('question/answer/edit',{'id':id,'answertext':texter});Questions.finishEdit(id,texter);return false;},finishEdit:function(id,texter){$('li#q_'+id+' form').remove();if(texter!==false){$('li#q_'+id+' p.answer').text(texter);}
$('li#q_'+id+' p.answer, li#q_'+id+' a').show();Questions.show();Questions.busy=false;},Delete:function(id){Coala.Warm('question/answer/delete',{'id':id});$('li#q_'+id).hide(400,function(){$(this).remove();});if($('div.newquestion:first').css('display')==="none"){Coala.Cold('question/get',{'callback':Questions.Renew});}
return false;},show:function(){$("div#answers ul.questions li").each(function(i){$(this).mouseover(function(){$(this).find('a').show();}).mouseout(function(){$(this).find('a').hide();});});},hide:function(){$("div#answers ul.questions li").each(function(i){$(this).unbind("mouseover").unbind("mouseout");});}};$(function(){if($('div#answers div.questions div.newquestion p.answer form input')[1]){$('div#answers div.questions div.newquestion p.answer form input')[1].focus();}
Questions.show();});$(function(){if($.browser.msie&&$.browser.version<7){window.location.href="ie.html";}});_uacct="UA-1065489-1";urchinTracker();var Comments={numchildren:{},Create:function(parentid){var texter;if(parentid===0){texter=$("div.newcomment div.text textarea").get(0).value;$("div.newcomment div.text textarea").get(0).value='';}
else{texter=$("#comment_reply_"+parentid+" div.text textarea").get(0).value;}
texter=$.trim(texter);if(texter===""){alert("Δε μπορείς να δημοσιεύσεις κενό μήνυμα");return;}
var a=document.createElement('a');$(a).append(document.createTextNode("Απάντησε")).attr('href','').click(function(){return false;});var indent=(parentid===0)?-1:parseInt($("#comment_"+parentid).css("paddingLeft"),10)/20;var del=document.createElement('a');del.style.marginRight=(parentid===0)?0:(indent+1)*20+'px';$(del).attr({title:"Διαγραφή",href:""}).append(document.createTextNode(' ')).click(function(){return false;});var daddy=(parentid===0)?$("div.newcomment:first").clone(true):$("#comment_reply_"+parentid);var temp=daddy.css("opacity",0).removeClass("newcomment").find("span.time").css("marginRight",0).text("πριν λίγο").end().find("div.toolbox").append(del).end().find("div.text").empty().text(texter).end().find("div.bottom").hide().empty().append(a).append(document.createTextNode(" σε αυτό το σχόλιο")).end();var valu=temp.find("div.text").html();temp.find("div.text").html(valu.replace(/\n/gi,"<br />"));if(parentid!==0){var kimeno=temp.find("div.text");var wid=($.browser.msie)?(kimeno.get(0).offsetWidth-20):parseInt(kimeno.css("width"),10);kimeno.css("width",wid-indent*20+'px');}
var useros=temp.find("div.who").get(0);useros.removeChild(useros.lastChild);useros.appendChild(document.createTextNode(" είπε:"));if(parentid===0){temp.insertAfter("div.newcomment:first").fadeTo(400,1);}
else{temp.insertAfter("#comment_"+parentid).fadeTo(400,1);var deletes=$("#comment_"+parentid+" div.toolbox a");if(deletes.length>0&&deletes.css('opacity')==1){deletes.fadeOut(400);deletes.parent().find("span").css("marginRight",indent*20+'px');}}
var type=temp.find("#type:first").text();Comments.FixCommentsNumber(type,true);Coala.Warm('comments/new',{text:texter,parent:parentid,compage:temp.find("#item:first").text(),type:type,node:temp,callback:Comments.NewCommentCallback});Comments.ToggledReplies[parentid]=0;},NewCommentCallback:function(node,id,parentid,newtext){if(parentid!==0){++Comments.numchildren[parentid];}
Comments.numchildren[id]=0;var indent=(parentid===0)?-1:parseInt($("#comment_"+parentid).css("paddingLeft"),10)/20;node.attr('id','comment_'+id);node.find('div.bottom').show().find('a').click(function(){Comments.ToggleReply(id,indent+1);return false;});if(!$.browser.msie){node.find('div.text').html(newtext.replace(/&nbsp;/g,' ')).get(0).ondblclick=function(){Comments.Edit(id);return false;}}
else{node.find('div.text').html(newtext).get(0).ondblclick=function(){Comments.Edit(id);return false;}}
node.find('div.toolbox a').get(0).onclick=function(){Comments.Delete(id);return false;}},Reply:function(nodeid,indent){var temp=$("div.newcomment:first").clone(true).css({marginLeft:(indent+1)*20+'px',opacity:0}).attr('id','comment_reply_'+nodeid);temp.find("div.toolbox span.time").css({marginRight:(indent+1)*20+'px'});temp.find("div.bottom form input:first").get(0).onclick=function(){$("#comment_reply_"+nodeid).css({marginLeft:0,paddingLeft:(indent+1)*20+'px'});Comments.Create(nodeid);return false;};temp.insertAfter('#comment_'+nodeid).fadeTo(300,1);temp.find("div.bottom input").get(0).focus();temp.find("div.text textarea").get(0).focus();var wid=($.browser.msie)?(temp.find("div.text textarea").get(0).offsetWidth-20):parseInt(temp.find("div.text textarea").css("width"),10);temp.find("div.text textarea").css("width",wid-(indent+1)*20+'px');},Edit:function(nodeid){var node=$("#comment_"+nodeid);var text=node.find("div.text").text();var textarea=document.createElement('textarea');textarea.value=text;var div=document.createElement('div');div.className="bottom";var form=document.createElement('form');form.onsubmit=function(){return false;};var input=document.createElement('input');$(input).attr({type:"submit",value:"Επεξεργασία"}).click(function(){var daddy=$(this).parents().eq(2);var texter=daddy.find("div.text textarea").get(0).value;texter=$.trim(texter);if(texter===''){alert("Δε μπορείς να δημοσιεύσεις κενό μήνυμα");return;}
daddy.find("div.text").empty().append(document.createTextNode(texter)).end().find("div.bottom:last").remove().end().find("div.bottom").css('display','block');Coala.Warm('comments/edit',{id:daddy.attr('id').substring(8),text:texter});});var input2=document.createElement('input');$(input2).attr({type:"reset",value:"Ακύρωση"}).click(function(){var daddy=$(this).parents().eq(2);daddy.find("div.text").empty().append(document.createTextNode(text)).end().find("div.bottom:last").remove().end().find("div.bottom").css('display','block');});$(form).append(input).append(document.createTextNode(' ')).append(input2);$(div).append(form);node.find("div.text").empty().append(textarea).end().find("div.bottom").css('display','none').end().append(div);node.find("div.text textarea").get(0).focus();},Delete:function(nodeid){var node=$("#comment_"+nodeid);node.fadeOut(450,function(){$(this).remove();});Coala.Warm('comments/delete',{commentid:nodeid});return false;},FixCommentsNumber:function(type,inc){if(type!=2&&type!=4){return;}
var node=$("dl dd.commentsnum");if(node.length!==0){var commentsnum=parseInt(node.text(),10);commentsnum=(inc)?commentsnum+1:commentsnum-1;node.text(commentsnum+" σχόλια");}
else{var dd=document.createElement('dd');dd.className="commentsnum";dd.appendChild(document.createTextNode("1 σχόλιο"));$("div dl").prepend(dd);}},FindLeftPadding:function(node){var leftpadd=$(node).css('padding-left');if(leftpadd){return leftpadd.substr(0,leftpadd.length-2)-0;}
else{return false;}},ToggledReplies:{},ToggleReply:function(id,indent){if(typeof Comments.ToggledReplies[id]!='undefined'&&Comments.ToggledReplies[id]===1){$('#comment_reply_'+id).hide(300,function(){$(this).remove();});Comments.ToggledReplies[id]=0;return;}
Comments.ToggledReplies[id]=1;Comments.Reply(id,indent);},Focus:function(id,indent,loggedin){var cmd=$('#comment_'+id)[0];cmd.scrollIntoView(false);if(loggedin){Comments.ToggleReply(id,indent-1);}}};$(function(){$("div.comments div.comment").not(".newcomment").not(".empty").each(function(i){var id=$(this).attr('id').substring(8);var indent=parseInt($(this).css('paddingLeft'),10)/20;var kimeno=$(this).find("div.text");var wid=($.browser.msie)?(kimeno.get(0).offsetWidth-20):parseInt(kimeno.css("width"),10);kimeno.css("width",wid-indent*20+'px');$(this).find("div.bottom a").click(function(){Comments.ToggleReply(id,indent);return false;});});if($("div.comment[id^='comment_']")[0]){var username=GetUsername();var commdate,leftpadd;$("div.comments div.comment[id^='comment_']").each(function(){commdate=$(this).find("div.toolbox span.time").text();leftpadd=Comments.FindLeftPadding(this);if(leftpadd>1000){$(this).find('div.bottom').empty();}
$(this).find("div.toolbox span.time").empty().css('margin-right',Comments.FindLeftPadding(this)+'px').append(document.createTextNode(greekDateDiff(dateDiff(commdate,nowdate)))).removeClass('invisible');if(username){if(username==$(this).find('div.who a img.avatar').attr('alt')){var id=this.id.substr(8,this.id.length-8);$(this).find("div.text").dblclick(function(){return Comments.Edit(id);});leftpadd+=20;var nextleftpadd=Comments.FindLeftPadding($(this).next()[0]);if(leftpadd!=nextleftpadd){$(this).find("span.time").css('margin-right','0px').end().find('div.toolbox a').removeClass('invisible').click(function(){return Comments.Delete(id);});}}}
else{$(this).find('div.bottom').empty();}});}});var Search={check:function(){var check=false;if(!$('div.ybubble div.body form div.search input')[2].checked){return true;}
$('div.ybubble div.body form div.search select').each(function(){if(this.selectedIndex!==0){check=true;}});if(!check){alert("Όρισε κάποιες επιλογές για να πραγματοποιήσεις αναζήτηση ατόμων.");return false;}
return true;}};$(function(){$('div#schview div.photos div.plist ul li a.uploadphoto').click(function(){var modal=$('#schooluploadmodal')[0].cloneNode(true);$(modal).show();$(modal).find('a.close').click(function(){Modals.Destroy();return false;});Modals.Create(modal,350,250);return false;});});